(function(){ try {var elementStyle = document.createElement('style'); elementStyle.appendChild(document.createTextNode(".kw-form-select-kiwi{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%23a0aec0' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");background-position:right 8px center;background-repeat:no-repeat;background-size:1.5em 1.5em;-webkit-print-color-adjust:exact;color-adjust:exact;print-color-adjust:exact;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-color:#a0aec0;border-radius:0;padding:8px 12px;font-size:1}.kw-form-select-kiwi:focus{outline:2px solid transparent;outline-offset:2px;--tw-ring-inset: var(--tw-empty, );--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: #3182ce;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 transparent);border-color:#3182ce}*,:before,:after{--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.kw-fixed{position:fixed}.kw-absolute{position:absolute}.kw-relative{position:relative}.kw-inset-0{top:0px;right:0px;bottom:0px;left:0px}.kw-left-0{left:0px}.kw-top-0{top:0px}.kw-z-\\[1000000\\]{z-index:1000000}.kw-z-50{z-index:50}.kw-m-4{margin:16px}.kw-mx-auto{margin-left:auto;margin-right:auto}.kw-my-4{margin-top:16px;margin-bottom:16px}.-kw-ml-1{margin-left:-4px}.kw-mr-3{margin-right:12px}.kw-mt-3{margin-top:12px}.kw-ml-3{margin-left:12px}.kw-mt-0{margin-top:0}.kw-mt-2{margin-top:8px}.kw-mb-4{margin-bottom:16px}.kw-mt-8{margin-top:32px}.kw-mr-1{margin-right:4px}.kw-mt-4{margin-top:16px}.kw-block{display:block}.kw-inline-block{display:inline-block}.kw-flex{display:flex}.kw-inline-flex{display:inline-flex}.kw-hidden{display:none}.kw-h-20{height:80px}.kw-h-5{height:20px}.kw-h-full{height:100%}.kw-h-16{height:64px}.kw-h-6{height:24px}.kw-min-h-screen{min-height:100vh}.kw-w-full{width:100%}.kw-w-auto{width:auto}.kw-w-8\\/12{width:66.666667%}.kw-w-16{width:64px}.kw-w-6{width:24px}.kw-max-w-\\[400px\\]{max-width:400px}.kw-flex-1{flex:1 1 0%}.kw-transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@-webkit-keyframes kw-spin{to{transform:rotate(360deg)}}@keyframes kw-spin{to{transform:rotate(360deg)}}.kw-animate-spin{-webkit-animation:kw-spin 1s linear infinite;animation:kw-spin 1s linear infinite}.kw-cursor-pointer{cursor:pointer}.kw-flex-row{flex-direction:row}.kw-flex-row-reverse{flex-direction:row-reverse}.kw-flex-col{flex-direction:column}.kw-items-end{align-items:flex-end}.kw-items-center{align-items:center}.kw-justify-end{justify-content:flex-end}.kw-justify-center{justify-content:center}.kw-justify-between{justify-content:space-between}.kw-overflow-hidden{overflow:hidden}.kw-overflow-y-auto{overflow-y:auto}.kw-rounded-md{border-radius:6px}.kw-rounded-lg{border-radius:8px}.kw-rounded{border-radius:4px}.kw-border{border-width:1px}.kw-border-solid{border-style:solid}.kw-border-transparent{border-color:transparent}.kw-border-gray-100{--tw-border-opacity: 1;border-color:rgb(243 244 246 / var(--tw-border-opacity))}.kw-border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity))}.kw-bg-gray-500{--tw-bg-opacity: 1;background-color:rgb(107 114 128 / var(--tw-bg-opacity))}.kw-bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}.kw-bg-indigo-600{--tw-bg-opacity: 1;background-color:rgb(79 70 229 / var(--tw-bg-opacity))}.kw-bg-black{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity))}.kw-bg-gray-800{--tw-bg-opacity: 1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}.kw-bg-\\[\\#edf2f7\\]{--tw-bg-opacity: 1;background-color:rgb(237 242 247 / var(--tw-bg-opacity))}.kw-bg-opacity-25{--tw-bg-opacity: .25 }.kw-p-10{padding:40px}.kw-p-6{padding:24px}.kw-p-3{padding:12px}.kw-p-4{padding:16px}.kw-p-2{padding:8px}.kw-px-4{padding-left:16px;padding-right:16px}.kw-py-2{padding-top:8px;padding-bottom:8px}.kw-py-3{padding-top:12px;padding-bottom:12px}.kw-px-6{padding-left:24px;padding-right:24px}.kw-py-8{padding-top:32px;padding-bottom:32px}.kw-py-6{padding-top:24px;padding-bottom:24px}.kw-pt-4{padding-top:16px}.kw-pb-20{padding-bottom:80px}.kw-pl-3{padding-left:12px}.kw-pr-10{padding-right:40px}.kw-text-left{text-align:left}.kw-text-center{text-align:center}.kw-text-right{text-align:right}.kw-align-middle{vertical-align:middle}.kw-font-sans{font-family:Open Sans,ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",Segoe UI Symbol,\"Noto Color Emoji\"}.kw-text-lg{font-size:18px;line-height:28px}.kw-text-sm{font-size:14px;line-height:20px}.kw-text-base{font-size:16px;line-height:24px}.kw-text-2xl{font-size:24px;line-height:32px}.kw-text-xl{font-size:20px;line-height:28px}.kw-font-bold{font-weight:700}.kw-font-medium{font-weight:500}.kw-uppercase{text-transform:uppercase}.kw-leading-6{line-height:24px}.kw-leading-none{line-height:1}.kw-text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.kw-text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity))}.kw-text-\\[\\#a0aec0\\]{--tw-text-opacity: 1;color:rgb(160 174 192 / var(--tw-text-opacity))}.kw-text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity))}.kw-text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity))}.kw-text-\\[\\#38a169\\]{--tw-text-opacity: 1;color:rgb(56 161 105 / var(--tw-text-opacity))}.kw-text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity))}.kw-text-\\[\\#ed8936\\]{--tw-text-opacity: 1;color:rgb(237 137 54 / var(--tw-text-opacity))}.kw-text-\\[\\#2b6cb0\\]{--tw-text-opacity: 1;color:rgb(43 108 176 / var(--tw-text-opacity))}.kw-underline{-webkit-text-decoration-line:underline;text-decoration-line:underline}.kw-opacity-75{opacity:.75}.kw-opacity-25{opacity:.25}.kw-opacity-50{opacity:.5}.kw-shadow-xl{--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-shadow-inner{--tw-shadow: inset 0 2px 4px 0 rgb(0 0 0 / .05);--tw-shadow-colored: inset 0 2px 4px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.kw-transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.kw-transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}#kiwify-upsell-container{font-family:Open Sans,sans-serif!important;line-height:1.5!important;-webkit-font-smoothing:antialiased!important}html.is-locked,body.is-locked{height:calc(var(--window-inner-height) - 1px);overflow:hidden;box-sizing:border-box}.kw-form-container-kiwi-pix{height:90vh!important}@media only screen and (min-height: 768px){.kw-form-container-kiwi-pix{height:auto!important}}@media only screen and (max-width: 600px){.kw-form-container-kiwi-pix{height:calc(100vh - 140px)!important}@supports (-webkit-touch-callout: none){.kw-form-container-kiwi-pix{height:calc(calc(var(--window-vh, 1vh) * 100) - 140px)!important}}}.hover\\:kw-bg-indigo-700:hover{--tw-bg-opacity: 1;background-color:rgb(67 56 202 / var(--tw-bg-opacity))}.hover\\:kw-no-underline:hover{-webkit-text-decoration-line:none;text-decoration-line:none}.focus\\:kw-outline-none:focus{outline:2px solid transparent;outline-offset:2px}@media (min-width: 640px){.sm\\:kw-block{display:block}.sm\\:kw-inline-block{display:inline-block}.sm\\:kw-h-screen{height:100vh}.sm\\:kw-max-w-\\[600px\\]{max-width:600px}.sm\\:kw-rounded-lg{border-radius:8px}.sm\\:kw-p-0{padding:0}.sm\\:kw-align-middle{vertical-align:middle}}@media (min-width: 768px){.md\\:kw-mt-0{margin-top:0}.md\\:kw-block{display:block}.md\\:kw-hidden{display:none}}")); document.head.appendChild(elementStyle);} catch(e) {console.error('vite-plugin-css-injected-by-js', e);} })();var Ko=Object.defineProperty,Qo=Object.defineProperties;var Yo=Object.getOwnPropertyDescriptors;var dn=Object.getOwnPropertySymbols;var Go=Object.prototype.hasOwnProperty,Zo=Object.prototype.propertyIsEnumerable;var vt=(i,o,a)=>o in i?Ko(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a,Ve=(i,o)=>{for(var a in o||(o={}))Go.call(o,a)&&vt(i,a,o[a]);if(dn)for(var a of dn(o))Zo.call(o,a)&&vt(i,a,o[a]);return i},pn=(i,o)=>Qo(i,Yo(o));var q=(i,o,a)=>(vt(i,typeof o!="symbol"?o+"":o,a),a);const es=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))u(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function a(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(l){if(l.ep)return;l.ep=!0;const s=a(l);fetch(l.href,s)}};es();var et,I,xn,Oe,Tn,mn,Ke={},En=[],ts=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ue(i,o){for(var a in o)i[a]=o[a];return i}function Pn(i){var o=i.parentNode;o&&o.removeChild(i)}function ns(i,o,a){var u,l,s,h={};for(s in o)s=="key"?u=o[s]:s=="ref"?l=o[s]:h[s]=o[s];if(arguments.length>2&&(h.children=arguments.length>3?et.call(arguments,2):a),typeof i=="function"&&i.defaultProps!=null)for(s in i.defaultProps)h[s]===void 0&&(h[s]=i.defaultProps[s]);return Xe(i,h,u,l,null)}function Xe(i,o,a,u,l){var s={type:i,props:o,key:a,ref:u,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l==null?++xn:l};return l==null&&I.vnode!=null&&I.vnode(s),s}function fe(i){return i.children}function K(i,o){this.props=i,this.context=o}function ke(i,o){if(o==null)return i.__?ke(i.__,i.__.__k.indexOf(i)+1):null;for(var a;o<i.__k.length;o++)if((a=i.__k[o])!=null&&a.__e!=null)return a.__e;return typeof i.type=="function"?ke(i):null}function An(i){var o,a;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,o=0;o<i.__k.length;o++)if((a=i.__k[o])!=null&&a.__e!=null){i.__e=i.__c.base=a.__e;break}return An(i)}}function gn(i){(!i.__d&&(i.__d=!0)&&Oe.push(i)&&!Qe.__r++||mn!==I.debounceRendering)&&((mn=I.debounceRendering)||Tn)(Qe)}function Qe(){for(var i;Qe.__r=Oe.length;)i=Oe.sort(function(o,a){return o.__v.__b-a.__v.__b}),Oe=[],i.some(function(o){var a,u,l,s,h,g;o.__d&&(h=(s=(a=o).__v).__e,(g=a.__P)&&(u=[],(l=ue({},s)).__v=s.__v+1,Pt(g,s,l,a.__n,g.ownerSVGElement!==void 0,s.__h!=null?[h]:null,u,h==null?ke(s):h,s.__h),In(u,s),s.__e!=h&&An(s)))})}function Ln(i,o,a,u,l,s,h,g,d,S){var m,P,p,y,b,k,_,v=u&&u.__k||En,C=v.length;for(a.__k=[],m=0;m<o.length;m++)if((y=a.__k[m]=(y=o[m])==null||typeof y=="boolean"?null:typeof y=="string"||typeof y=="number"||typeof y=="bigint"?Xe(null,y,null,null,y):Array.isArray(y)?Xe(fe,{children:y},null,null,null):y.__b>0?Xe(y.type,y.props,y.key,null,y.__v):y)!=null){if(y.__=a,y.__b=a.__b+1,(p=v[m])===null||p&&y.key==p.key&&y.type===p.type)v[m]=void 0;else for(P=0;P<C;P++){if((p=v[P])&&y.key==p.key&&y.type===p.type){v[P]=void 0;break}p=null}Pt(i,y,p=p||Ke,l,s,h,g,d,S),b=y.__e,(P=y.ref)&&p.ref!=P&&(_||(_=[]),p.ref&&_.push(p.ref,null,y),_.push(P,y.__c||b,y)),b!=null?(k==null&&(k=b),typeof y.type=="function"&&y.__k===p.__k?y.__d=d=Rn(y,d,i):d=On(i,y,p,v,b,d),typeof a.type=="function"&&(a.__d=d)):d&&p.__e==d&&d.parentNode!=i&&(d=ke(p))}for(a.__e=k,m=C;m--;)v[m]!=null&&(typeof a.type=="function"&&v[m].__e!=null&&v[m].__e==a.__d&&(a.__d=ke(u,m+1)),Bn(v[m],v[m]));if(_)for(m=0;m<_.length;m++)Mn(_[m],_[++m],_[++m])}function Rn(i,o,a){for(var u,l=i.__k,s=0;l&&s<l.length;s++)(u=l[s])&&(u.__=i,o=typeof u.type=="function"?Rn(u,o,a):On(a,u,u,l,u.__e,o));return o}function On(i,o,a,u,l,s){var h,g,d;if(o.__d!==void 0)h=o.__d,o.__d=void 0;else if(a==null||l!=s||l.parentNode==null)e:if(s==null||s.parentNode!==i)i.appendChild(l),h=null;else{for(g=s,d=0;(g=g.nextSibling)&&d<u.length;d+=2)if(g==l)break e;i.insertBefore(l,s),h=s}return h!==void 0?h:l.nextSibling}function rs(i,o,a,u,l){var s;for(s in a)s==="children"||s==="key"||s in o||Ye(i,s,null,a[s],u);for(s in o)l&&typeof o[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||a[s]===o[s]||Ye(i,s,o[s],a[s],u)}function yn(i,o,a){o[0]==="-"?i.setProperty(o,a):i[o]=a==null?"":typeof a!="number"||ts.test(o)?a:a+"px"}function Ye(i,o,a,u,l){var s;e:if(o==="style")if(typeof a=="string")i.style.cssText=a;else{if(typeof u=="string"&&(i.style.cssText=u=""),u)for(o in u)a&&o in a||yn(i.style,o,"");if(a)for(o in a)u&&a[o]===u[o]||yn(i.style,o,a[o])}else if(o[0]==="o"&&o[1]==="n")s=o!==(o=o.replace(/Capture$/,"")),o=o.toLowerCase()in i?o.toLowerCase().slice(2):o.slice(2),i.l||(i.l={}),i.l[o+s]=a,a?u||i.addEventListener(o,s?_n:vn,s):i.removeEventListener(o,s?_n:vn,s);else if(o!=="dangerouslySetInnerHTML"){if(l)o=o.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(o!=="href"&&o!=="list"&&o!=="form"&&o!=="tabIndex"&&o!=="download"&&o in i)try{i[o]=a==null?"":a;break e}catch{}typeof a=="function"||(a!=null&&(a!==!1||o[0]==="a"&&o[1]==="r")?i.setAttribute(o,a):i.removeAttribute(o))}}function vn(i){this.l[i.type+!1](I.event?I.event(i):i)}function _n(i){this.l[i.type+!0](I.event?I.event(i):i)}function Pt(i,o,a,u,l,s,h,g,d){var S,m,P,p,y,b,k,_,v,C,T,E=o.type;if(o.constructor!==void 0)return null;a.__h!=null&&(d=a.__h,g=o.__e=a.__e,o.__h=null,s=[g]),(S=I.__b)&&S(o);try{e:if(typeof E=="function"){if(_=o.props,v=(S=E.contextType)&&u[S.__c],C=S?v?v.props.value:S.__:u,a.__c?k=(m=o.__c=a.__c).__=m.__E:("prototype"in E&&E.prototype.render?o.__c=m=new E(_,C):(o.__c=m=new K(_,C),m.constructor=E,m.render=os),v&&v.sub(m),m.props=_,m.state||(m.state={}),m.context=C,m.__n=u,P=m.__d=!0,m.__h=[]),m.__s==null&&(m.__s=m.state),E.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=ue({},m.__s)),ue(m.__s,E.getDerivedStateFromProps(_,m.__s))),p=m.props,y=m.state,P)E.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(E.getDerivedStateFromProps==null&&_!==p&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(_,C),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(_,m.__s,C)===!1||o.__v===a.__v){m.props=_,m.state=m.__s,o.__v!==a.__v&&(m.__d=!1),m.__v=o,o.__e=a.__e,o.__k=a.__k,o.__k.forEach(function(O){O&&(O.__=o)}),m.__h.length&&h.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(_,m.__s,C),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(p,y,b)})}m.context=C,m.props=_,m.state=m.__s,(S=I.__r)&&S(o),m.__d=!1,m.__v=o,m.__P=i,S=m.render(m.props,m.state,m.context),m.state=m.__s,m.getChildContext!=null&&(u=ue(ue({},u),m.getChildContext())),P||m.getSnapshotBeforeUpdate==null||(b=m.getSnapshotBeforeUpdate(p,y)),T=S!=null&&S.type===fe&&S.key==null?S.props.children:S,Ln(i,Array.isArray(T)?T:[T],o,a,u,l,s,h,g,d),m.base=o.__e,o.__h=null,m.__h.length&&h.push(m),k&&(m.__E=m.__=null),m.__e=!1}else s==null&&o.__v===a.__v?(o.__k=a.__k,o.__e=a.__e):o.__e=is(a.__e,o,a,u,l,s,h,d);(S=I.diffed)&&S(o)}catch(O){o.__v=null,(d||s!=null)&&(o.__e=g,o.__h=!!d,s[s.indexOf(g)]=null),I.__e(O,o,a)}}function In(i,o){I.__c&&I.__c(o,i),i.some(function(a){try{i=a.__h,a.__h=[],i.some(function(u){u.call(a)})}catch(u){I.__e(u,a.__v)}})}function is(i,o,a,u,l,s,h,g){var d,S,m,P=a.props,p=o.props,y=o.type,b=0;if(y==="svg"&&(l=!0),s!=null){for(;b<s.length;b++)if((d=s[b])&&"setAttribute"in d==!!y&&(y?d.localName===y:d.nodeType===3)){i=d,s[b]=null;break}}if(i==null){if(y===null)return document.createTextNode(p);i=l?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,p.is&&p),s=null,g=!1}if(y===null)P===p||g&&i.data===p||(i.data=p);else{if(s=s&&et.call(i.childNodes),S=(P=a.props||Ke).dangerouslySetInnerHTML,m=p.dangerouslySetInnerHTML,!g){if(s!=null)for(P={},b=0;b<i.attributes.length;b++)P[i.attributes[b].name]=i.attributes[b].value;(m||S)&&(m&&(S&&m.__html==S.__html||m.__html===i.innerHTML)||(i.innerHTML=m&&m.__html||""))}if(rs(i,p,P,l,g),m)o.__k=[];else if(b=o.props.children,Ln(i,Array.isArray(b)?b:[b],o,a,u,l&&y!=="foreignObject",s,h,s?s[0]:a.__k&&ke(a,0),g),s!=null)for(b=s.length;b--;)s[b]!=null&&Pn(s[b]);g||("value"in p&&(b=p.value)!==void 0&&(b!==i.value||y==="progress"&&!b||y==="option"&&b!==P.value)&&Ye(i,"value",b,P.value,!1),"checked"in p&&(b=p.checked)!==void 0&&b!==i.checked&&Ye(i,"checked",b,P.checked,!1))}return i}function Mn(i,o,a){try{typeof i=="function"?i(o):i.current=o}catch(u){I.__e(u,a)}}function Bn(i,o,a){var u,l;if(I.unmount&&I.unmount(i),(u=i.ref)&&(u.current&&u.current!==i.__e||Mn(u,null,o)),(u=i.__c)!=null){if(u.componentWillUnmount)try{u.componentWillUnmount()}catch(s){I.__e(s,o)}u.base=u.__P=null}if(u=i.__k)for(l=0;l<u.length;l++)u[l]&&Bn(u[l],o,typeof i.type!="function");a||i.__e==null||Pn(i.__e),i.__e=i.__d=void 0}function os(i,o,a){return this.constructor(i,a)}function ss(i,o,a){var u,l,s;I.__&&I.__(i,o),l=(u=typeof a=="function")?null:a&&a.__k||o.__k,s=[],Pt(o,i=(!u&&a||o).__k=ns(fe,null,[i]),l||Ke,Ke,o.ownerSVGElement!==void 0,!u&&a?[a]:l?null:o.firstChild?et.call(o.childNodes):null,s,!u&&a?a:l?l.__e:o.firstChild,u),In(s,i)}et=En.slice,I={__e:function(i,o,a,u){for(var l,s,h;o=o.__;)if((l=o.__c)&&!l.__)try{if((s=l.constructor)&&s.getDerivedStateFromError!=null&&(l.setState(s.getDerivedStateFromError(i)),h=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(i,u||{}),h=l.__d),h)return l.__E=l}catch(g){i=g}throw i}},xn=0,K.prototype.setState=function(i,o){var a;a=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ue({},this.state),typeof i=="function"&&(i=i(ue({},a),this.props)),i&&ue(a,i),i!=null&&this.__v&&(o&&this.__h.push(o),gn(this))},K.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),gn(this))},K.prototype.render=fe,Oe=[],Tn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qe.__r=0;typeof window!="undefined"&&window.__PREACT_DEVTOOLS__&&window.__PREACT_DEVTOOLS__.attachPreact("10.7.2",I,{Fragment:fe,Component:K});var wn={};function ce(i){return i.type===fe?"Fragment":typeof i.type=="function"?i.type.displayName||i.type.name:typeof i.type=="string"?i.type:"#text"}var Ie=[],_e=[];function Dn(){return Ie.length>0?Ie[Ie.length-1]:null}var bn=!1;function _t(i){return typeof i.type=="function"&&i.type!=fe}function J(i){for(var o=[i],a=i;a.__o!=null;)o.push(a.__o),a=a.__o;return o.reduce(function(u,l){u+="  in "+ce(l);var s=l.__source;return s?u+=" (at "+s.fileName+":"+s.lineNumber+")":bn||(bn=!0,console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons.")),u+`
`},"")}var as=typeof WeakMap=="function",cs=K.prototype.setState;K.prototype.setState=function(i,o){return this.__v==null?this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+J(Dn())):this.__P==null&&console.warn(`Can't call "this.setState" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+J(this.__v)),cs.call(this,i,o)};var us=K.prototype.forceUpdate;function se(i){var o=i.props,a=ce(i),u="";for(var l in o)if(o.hasOwnProperty(l)&&l!=="children"){var s=o[l];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),u+=" "+l+"="+JSON.stringify(s)}var h=o.children;return"<"+a+u+(h&&h.length?">..</"+a+">":" />")}K.prototype.forceUpdate=function(i){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+J(Dn())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+J(this.__v)),us.call(this,i)},function(){(function(){var p=I.__b,y=I.diffed,b=I.__,k=I.vnode,_=I.__r;I.diffed=function(v){_t(v)&&_e.pop(),Ie.pop(),y&&y(v)},I.__b=function(v){_t(v)&&Ie.push(v),p&&p(v)},I.__=function(v,C){_e=[],b&&b(v,C)},I.vnode=function(v){v.__o=_e.length>0?_e[_e.length-1]:null,k&&k(v)},I.__r=function(v){_t(v)&&_e.push(v),_&&_(v)}})();var i=!1,o=I.__b,a=I.diffed,u=I.vnode,l=I.__e,s=I.__,h=I.__h,g=as?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,d=[];I.__e=function(p,y,b,k){if(y&&y.__c&&typeof p.then=="function"){var _=p;p=new Error("Missing Suspense. The throwing component was: "+ce(y));for(var v=y;v;v=v.__)if(v.__c&&v.__c.__c){p=_;break}if(p instanceof Error)throw p}try{(k=k||{}).componentStack=J(y),l(p,y,b,k),typeof p.then!="function"&&setTimeout(function(){throw p})}catch(C){throw C}},I.__=function(p,y){if(!y)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var b;switch(y.nodeType){case 1:case 11:case 9:b=!0;break;default:b=!1}if(!b){var k=ce(p);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+y+" instead: render(<"+k+" />, "+y+");")}s&&s(p,y)},I.__b=function(p){var y=p.type,b=function T(E){return E?typeof E.type=="function"?T(E.__):E:{}}(p.__);if(i=!0,y===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+se(p)+`

`+J(p));if(y!=null&&typeof y=="object")throw y.__k!==void 0&&y.__e!==void 0?new Error("Invalid type passed to createElement(): "+y+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+ce(p)+" = "+se(y)+`;
  let vnode = <My`+ce(p)+` />;

This usually happens when you export a JSX literal and not the component.

`+J(p)):new Error("Invalid type passed to createElement(): "+(Array.isArray(y)?"array":y));if(y!=="thead"&&y!=="tfoot"&&y!=="tbody"||b.type==="table"?y==="tr"&&b.type!=="thead"&&b.type!=="tfoot"&&b.type!=="tbody"&&b.type!=="table"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot/table> parent."+se(p)+`

`+J(p)):y==="td"&&b.type!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+se(p)+`

`+J(p)):y==="th"&&b.type!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+se(p)+`

`+J(p)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+se(p)+`

`+J(p)),p.ref!==void 0&&typeof p.ref!="function"&&typeof p.ref!="object"&&!("$$typeof"in p))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof p.ref+`] instead
`+se(p)+`

`+J(p));if(typeof p.type=="string"){for(var k in p.props)if(k[0]==="o"&&k[1]==="n"&&typeof p.props[k]!="function"&&p.props[k]!=null)throw new Error(`Component's "`+k+'" property should be a function, but got ['+typeof p.props[k]+`] instead
`+se(p)+`

`+J(p))}if(typeof p.type=="function"&&p.type.propTypes){if(p.type.displayName==="Lazy"&&g&&!g.lazyPropTypes.has(p.type)){var _="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var v=p.type();g.lazyPropTypes.set(p.type,!0),console.warn(_+"Component wrapped in lazy() is "+ce(v))}catch{console.warn(_+"We will log the wrapped component's name once it is loaded.")}}var C=p.props;p.type.__f&&delete(C=function(T,E){for(var O in E)T[O]=E[O];return T}({},C)).ref,function(T,E,O,B,j){Object.keys(T).forEach(function(F){var U;try{U=T[F](E,F,B,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(H){U=H}!U||U.message in wn||(wn[U.message]=!0,console.error("Failed prop type: "+U.message+(j&&`
`+j()||"")))})}(p.type.propTypes,C,0,ce(p),function(){return J(p)})}o&&o(p)},I.__h=function(p,y,b){if(!p||!i)throw new Error("Hook can only be invoked from render methods.");h&&h(p,y,b)};var S=function(p,y){return{get:function(){var b="get"+p+y;d&&d.indexOf(b)<0&&(d.push(b),console.warn("getting vnode."+p+" is deprecated, "+y))},set:function(){var b="set"+p+y;d&&d.indexOf(b)<0&&(d.push(b),console.warn("setting vnode."+p+" is not allowed, "+y))}}},m={nodeName:S("nodeName","use vnode.type"),attributes:S("attributes","use vnode.props"),children:S("children","use vnode.props.children")},P=Object.create({},m);I.vnode=function(p){var y=p.props;if(p.type!==null&&y!=null&&("__source"in y||"__self"in y)){var b=p.props={};for(var k in y){var _=y[k];k==="__source"?p.__source=_:k==="__self"?p.__self=_:b[k]=_}}p.__proto__=P,u&&u(p)},I.diffed=function(p){if(p.__k&&p.__k.forEach(function(v){if(v&&v.type===void 0){delete v.__,delete v.__b;var C=Object.keys(v).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+C+`}.

`+J(p))}}),i=!1,a&&a(p),p.__k!=null)for(var y=[],b=0;b<p.__k.length;b++){var k=p.__k[b];if(k&&k.key!=null){var _=k.key;if(y.indexOf(_)!==-1){console.error('Following component has two or more children with the same key attribute: "'+_+`". This may cause glitches and misbehavior in rendering process. Component: 

`+se(p)+`

`+J(p));break}y.push(_)}}}}();var kn,ls=(function(i,o){i.exports=function(a,u,l,s,h){for(u=u.split?u.split("."):u,s=0;s<u.length;s++)a=a?a[u[s]]:h;return a===h?l:a}}(kn={path:void 0,exports:{},require:function(i,o){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),kn.exports);function fs(i,o,a){var u=o.split("."),l=i.__lsc||(i.__lsc={});return l[o+a]||(l[o+a]=function(s){for(var h=s&&s.target||this,g={},d=g,S=typeof a=="string"?ls(s,a):h&&h.nodeName?h.type.match(/^che|rad/)?h.checked:h.value:s,m=0;m<u.length-1;m++)d=d[u[m]]||(d[u[m]]=!m&&i.state[u[m]]||{});d[u[m]]=S,i.setState(g)})}function we(i){return{weekly:"semana",monthly:"m\xEAs",bimonthly:"bimestre",quarterly:"trimestre","semi-annually":"semestre",annually:"ano"}[i]}function ee(i,o){return Number(i/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function ne(i,o=!1){setTimeout(function(){i.indexOf("?")>-1?window.location.href=o?i+"&"+o:i:window.location.href=o?i+"?"+o:i},1200)}function be(i){i=i.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+i+"=([^&#]*)"),a=o.exec(location.search);return a===null?null:decodeURIComponent(a[1].replace(/\+/g," "))}function hs(i,o){if(i.indexOf("#")===0&&(i=i.slice(1)),i.length===3&&(i=i[0]+i[0]+i[1]+i[1]+i[2]+i[2]),i.length!==6)throw new Error("Invalid HEX color.");var a=parseInt(i.slice(0,2),16),u=parseInt(i.slice(2,4),16),l=parseInt(i.slice(4,6),16);return o?a*.299+u*.587+l*.114>186?"#000000":"#FFFFFF":(a=(255-a).toString(16),u=(255-u).toString(16),l=(255-l).toString(16),"#"+padZero(a)+padZero(u)+padZero(l))}function At(i,o,a,u,l){let s=`code_senha=${i}`;return o&&(s+=`&token=${o}`),a&&(s+=`&amount=${a}`),u&&(s+="&pix_upsell=true"),l==="kiwipay"&&(s+="&payment_version=kiwipay"),s}function ds(i){let o,a;try{o=document.createElement("textarea"),o.setAttribute("readonly",!0),o.setAttribute("contenteditable",!0),o.style.position="fixed",o.value=i,document.body.appendChild(o),o.select();const u=document.createRange();u.selectNodeContents(o);const l=window.getSelection();l.removeAllRanges(),l.addRange(u),o.setSelectionRange(0,o.value.length),a=document.execCommand("copy")}catch(u){console.error(u),a=null}finally{document.body.removeChild(o)}if(!a){const l=navigator.platform.toUpperCase().indexOf("MAC")>=0?"\u2318C":"CTRL+C";if(a=prompt(`Press ${l}`,i),!a)return!1}return!0}var ps=0;function N(i,o,a,u,l){var s,h,g={};for(h in o)h=="ref"?s=o[h]:g[h]=o[h];var d={type:i,props:g,key:a,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--ps,__source:l,__self:u};if(typeof i=="function"&&(s=i.defaultProps))for(h in s)g[h]===void 0&&(g[h]=s[h]);return I.vnode&&I.vnode(d),d}var Y="/Users/justaashir/Documents/Kiwify/upsell-vite/src/credit-card-form.jsx";class ms extends K{constructor(a){super();q(this,"setupFeeRenewalText",()=>{if(this.props.data.subscription&&this.props.data.subscription.setup_fee_enabled){let a=this.state.options.findIndex(u=>u.key==this.state.selectedOption);return a!==-1?N("div",{className:"kw-text-center kw-text-sm kw-mt-3 kw-leading-none kw-text-gray-700",children:this.state.options[a].renewal},void 0,!1,{fileName:Y,lineNumber:68,columnNumber:25}):null}else return N("div",{},void 0,!1,{fileName:Y,lineNumber:70,columnNumber:14})});q(this,"calculateInterest",(a,u)=>{const l=parseFloat(.029900000000000003 .toFixed(4)),s=u,h=parseFloat(((l/(1-Math.pow(1+l,-s))*s-1)*100).toFixed(4));return Math.round(a*h/100)});q(this,"subscriptionFrequencySetupFee",()=>this.props.data.subscription?{annually:"o primeiro ano","semi-annually":"o primeiro semestre",quarterly:"o primeiro trimestre",bimonthly:"o primeiro bimestre",monthly:"o primeiro m\xEAs",weekly:"a primeira semana"}[this.props.data.subscription.frequency]:null);q(this,"calculateSetupFeeInstallments",()=>{let a=[],u=this.props.data.price;if(u>0){parseFloat((2.99/100).toFixed(4));let l=this.props.data.subscription.installments;for(let s=l-1;s>-1;s--){let h=0,d=s+1;const S=parseFloat((u+h)/d/100);let m=this.props.data.subscription.setup_fee,P=this.calculateInterest(this.props.data.subscription.setup_fee,d);m=parseFloat((this.props.data.subscription.setup_fee+P)/d),(S>5||u<=500&&d==1)&&a.push(m)}}return a.reverse()});q(this,"setupOptions",()=>{let a=[];if(this.props.data.subscription){let{subscription:u}=this.props.data,l=[];if(u.installments!==1){u.setup_fee_enabled&&(l=this.calculateSetupFeeInstallments());for(let s=0;s<u.installments;s++)s+1===1?a.push({key:s+1,value:this.props.setupFeeEnabled?`${ee(u.setup_fee)} para ${this.subscriptionFrequencySetupFee()}`:`${ee(u.price)} / ${we(u.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${ee(u.price)} / ${we(u.frequency)}`:null}):this.props.data.installments[s]>500&&a.push({key:s+1,value:this.props.setupFeeEnabled?`${s+1}x de ${ee(l[s])} para ${this.subscriptionFrequencySetupFee()}`:`${s+1}x de ${ee(this.props.data.installments[s])} / ${we(u.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${s+1}x de ${ee(this.props.data.installments[s])} / ${we(u.frequency)}`:null});a.reverse()}else a.push({key:1,value:this.props.setupFeeEnabled?`${ee(u.setup_fee)} para ${this.subscriptionFrequencySetupFee()}`:`${ee(u.price)} / ${we(u.frequency)}`,renewal:this.props.setupFeeEnabled?`Depois renova por ${ee(u.price)} / ${we(u.frequency)}`:null})}else if(this.props.data.installments){let u=[...this.props.data.installments];u.reverse(),u.map(function(l,s){l>=500&&a.push({key:u.length-s,value:`${u.length-s}x de ${ee(l)}`})})}this.setState({options:a,selectedOption:a.length?a[0].key:null})});q(this,"onCharge",async()=>{try{let a="1";this.props.data.subscription?a=this.props.data.subscription.installments!==1?this.state.selectedOption:"1":a=this.state.selectedOption,this.setState({makingCharge:!0});const u=this.props.paymentVersion=="kiwipay"?"/v2/charge/upsell":"/charge/upsell",s=await(await fetch(`https://checkout-api.kiwify.com.br${u}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:this.props.data.tokenParam,installments:a,link:this.props.data.linkId})})).json();if(nextUpsellURL){const{upsell_token:h}=s;let g=At(this.props.data.redirect,h,this.props.data.order_amount,this.state.modalContentType==="pix",this.props.paymentVersion);ne(nextUpsellURL,g)}else this.props.data.redirect!=="undefined"&&this.props.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only")}catch{this.props.data.redirect!=="undefined"&&this.props.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only")}finally{}});this.state={options:[],makingCharge:!1,selectedOption:null}}componentWillMount(){this.setupOptions()}componentDidUpdate(){this.props.isLoadingCharge&&!this.state.makingCharge&&this.onCharge()}render(a,u){return N("div",{children:[N("div",{className:"kw-mt-3 kw-text-center",children:N("div",{className:"kw-text-lg kw-leading-6 kw-font-sans kw-font-bold kw-text-gray-900",children:"Pagamento adicional"},void 0,!1,{fileName:Y,lineNumber:26,columnNumber:11},this)},void 0,!1,{fileName:Y,lineNumber:25,columnNumber:9},this),N("div",{id:"kiwify-upsell-modal-credit-card",className:"kw-flex kw-items-center kw-justify-center kw-flex-col",children:[N("div",{children:N("div",{className:"kw-text-[#a0aec0] kw-my-4 kw-font-sans kw-text-sm",children:"Voc\xEA ser\xE1 cobrado no cart\xE3o de cr\xE9dito"},void 0,!1,{fileName:Y,lineNumber:34,columnNumber:13},this)},void 0,!1,{fileName:Y,lineNumber:33,columnNumber:11},this),N("div",{children:N("div",{className:"kw-py-2 kw-inline-block",id:"kiwify-upsell-modal-installments-container",children:[N("select",{id:"kiwify-upsell-modal-installments",className:"kw-rounded-md kw-form-select-kiwi kw-block kw-w-auto kw-mx-auto kw-pl-3 kw-pr-10 kw-py-2 kw-text-base kw-leading-6 kw-focus:outline-none",style:"min-width:200px;",onChange:fs(this,"selectedOption","target.value"),children:u.options.map(l=>N("option",{value:l.key,children:l.value},l.key,!1,{fileName:Y,lineNumber:52,columnNumber:28},this))},void 0,!1,{fileName:Y,lineNumber:44,columnNumber:15},this),this.setupFeeRenewalText(u.selectedOption)]},void 0,!0,{fileName:Y,lineNumber:40,columnNumber:13},this)},void 0,!1,{fileName:Y,lineNumber:39,columnNumber:11},this)]},void 0,!0,{fileName:Y,lineNumber:32,columnNumber:9},this)]},void 0,!0,{fileName:Y,lineNumber:24,columnNumber:7})}}var Re="/Users/justaashir/Documents/Kiwify/upsell-vite/src/payment-only-form.jsx";class gs extends K{constructor(o){super()}render(o,a){return N("div",{children:N("div",{className:"kw-mt-3 kw-text-center",children:[N("h3",{className:"kw-text-lg kw-leading-6 kw-font-sans kw-font-bold kw-text-gray-900",id:"modal-headline",children:"Muito obrigado!"},void 0,!1,{fileName:Re,lineNumber:11,columnNumber:11},this),N("div",{className:"kw-mt-2",children:N("div",{className:"kw-text-sm kw-my-4 kw-text-[#a0aec0] kw-font-sans",children:"Verifique o seu e-mail para ver instru\xE7\xF5es de acesso ao produto digital, e o recibo de pagamento."},void 0,!1,{fileName:Re,lineNumber:15,columnNumber:13},this)},void 0,!1,{fileName:Re,lineNumber:14,columnNumber:11},this)]},void 0,!0,{fileName:Re,lineNumber:10,columnNumber:9},this)},void 0,!1,{fileName:Re,lineNumber:9,columnNumber:7})}}function ys(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var jn={exports:{}};/*!
 * Pusher JavaScript Library v7.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(i,o){(function(u,l){i.exports=l()})(window,function(){return function(a){var u={};function l(s){if(u[s])return u[s].exports;var h=u[s]={i:s,l:!1,exports:{}};return a[s].call(h.exports,h,h.exports,l),h.l=!0,h.exports}return l.m=a,l.c=u,l.d=function(s,h,g){l.o(s,h)||Object.defineProperty(s,h,{enumerable:!0,get:g})},l.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},l.t=function(s,h){if(h&1&&(s=l(s)),h&8||h&4&&typeof s=="object"&&s&&s.__esModule)return s;var g=Object.create(null);if(l.r(g),Object.defineProperty(g,"default",{enumerable:!0,value:s}),h&2&&typeof s!="string")for(var d in s)l.d(g,d,function(S){return s[S]}.bind(null,d));return g},l.n=function(s){var h=s&&s.__esModule?function(){return s.default}:function(){return s};return l.d(h,"a",h),h},l.o=function(s,h){return Object.prototype.hasOwnProperty.call(s,h)},l.p="",l(l.s=2)}([function(a,u,l){var s=this&&this.__extends||function(){var k=function(_,v){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,T){C.__proto__=T}||function(C,T){for(var E in T)T.hasOwnProperty(E)&&(C[E]=T[E])},k(_,v)};return function(_,v){k(_,v);function C(){this.constructor=_}_.prototype=v===null?Object.create(v):(C.prototype=v.prototype,new C)}}();Object.defineProperty(u,"__esModule",{value:!0});var h=256,g=function(){function k(_){_===void 0&&(_="="),this._paddingCharacter=_}return k.prototype.encodedLength=function(_){return this._paddingCharacter?(_+2)/3*4|0:(_*8+5)/6|0},k.prototype.encode=function(_){for(var v="",C=0;C<_.length-2;C+=3){var T=_[C]<<16|_[C+1]<<8|_[C+2];v+=this._encodeByte(T>>>3*6&63),v+=this._encodeByte(T>>>2*6&63),v+=this._encodeByte(T>>>1*6&63),v+=this._encodeByte(T>>>0*6&63)}var E=_.length-C;if(E>0){var T=_[C]<<16|(E===2?_[C+1]<<8:0);v+=this._encodeByte(T>>>3*6&63),v+=this._encodeByte(T>>>2*6&63),E===2?v+=this._encodeByte(T>>>1*6&63):v+=this._paddingCharacter||"",v+=this._paddingCharacter||""}return v},k.prototype.maxDecodedLength=function(_){return this._paddingCharacter?_/4*3|0:(_*6+7)/8|0},k.prototype.decodedLength=function(_){return this.maxDecodedLength(_.length-this._getPaddingLength(_))},k.prototype.decode=function(_){if(_.length===0)return new Uint8Array(0);for(var v=this._getPaddingLength(_),C=_.length-v,T=new Uint8Array(this.maxDecodedLength(C)),E=0,O=0,B=0,j=0,F=0,U=0,H=0;O<C-4;O+=4)j=this._decodeChar(_.charCodeAt(O+0)),F=this._decodeChar(_.charCodeAt(O+1)),U=this._decodeChar(_.charCodeAt(O+2)),H=this._decodeChar(_.charCodeAt(O+3)),T[E++]=j<<2|F>>>4,T[E++]=F<<4|U>>>2,T[E++]=U<<6|H,B|=j&h,B|=F&h,B|=U&h,B|=H&h;if(O<C-1&&(j=this._decodeChar(_.charCodeAt(O)),F=this._decodeChar(_.charCodeAt(O+1)),T[E++]=j<<2|F>>>4,B|=j&h,B|=F&h),O<C-2&&(U=this._decodeChar(_.charCodeAt(O+2)),T[E++]=F<<4|U>>>2,B|=U&h),O<C-3&&(H=this._decodeChar(_.charCodeAt(O+3)),T[E++]=U<<6|H,B|=H&h),B!==0)throw new Error("Base64Coder: incorrect characters for decoding");return T},k.prototype._encodeByte=function(_){var v=_;return v+=65,v+=25-_>>>8&0-65-26+97,v+=51-_>>>8&26-97-52+48,v+=61-_>>>8&52-48-62+43,v+=62-_>>>8&62-43-63+47,String.fromCharCode(v)},k.prototype._decodeChar=function(_){var v=h;return v+=(42-_&_-44)>>>8&-h+_-43+62,v+=(46-_&_-48)>>>8&-h+_-47+63,v+=(47-_&_-58)>>>8&-h+_-48+52,v+=(64-_&_-91)>>>8&-h+_-65+0,v+=(96-_&_-123)>>>8&-h+_-97+26,v},k.prototype._getPaddingLength=function(_){var v=0;if(this._paddingCharacter){for(var C=_.length-1;C>=0&&_[C]===this._paddingCharacter;C--)v++;if(_.length<4||v>2)throw new Error("Base64Coder: incorrect padding")}return v},k}();u.Coder=g;var d=new g;function S(k){return d.encode(k)}u.encode=S;function m(k){return d.decode(k)}u.decode=m;var P=function(k){s(_,k);function _(){return k!==null&&k.apply(this,arguments)||this}return _.prototype._encodeByte=function(v){var C=v;return C+=65,C+=25-v>>>8&0-65-26+97,C+=51-v>>>8&26-97-52+48,C+=61-v>>>8&52-48-62+45,C+=62-v>>>8&62-45-63+95,String.fromCharCode(C)},_.prototype._decodeChar=function(v){var C=h;return C+=(44-v&v-46)>>>8&-h+v-45+62,C+=(94-v&v-96)>>>8&-h+v-95+63,C+=(47-v&v-58)>>>8&-h+v-48+52,C+=(64-v&v-91)>>>8&-h+v-65+0,C+=(96-v&v-123)>>>8&-h+v-97+26,C},_}(g);u.URLSafeCoder=P;var p=new P;function y(k){return p.encode(k)}u.encodeURLSafe=y;function b(k){return p.decode(k)}u.decodeURLSafe=b,u.encodedLength=function(k){return d.encodedLength(k)},u.maxDecodedLength=function(k){return d.maxDecodedLength(k)},u.decodedLength=function(k){return d.decodedLength(k)}},function(a,u,l){Object.defineProperty(u,"__esModule",{value:!0});var s="utf8: invalid string",h="utf8: invalid source encoding";function g(m){for(var P=new Uint8Array(d(m)),p=0,y=0;y<m.length;y++){var b=m.charCodeAt(y);b<128?P[p++]=b:b<2048?(P[p++]=192|b>>6,P[p++]=128|b&63):b<55296?(P[p++]=224|b>>12,P[p++]=128|b>>6&63,P[p++]=128|b&63):(y++,b=(b&1023)<<10,b|=m.charCodeAt(y)&1023,b+=65536,P[p++]=240|b>>18,P[p++]=128|b>>12&63,P[p++]=128|b>>6&63,P[p++]=128|b&63)}return P}u.encode=g;function d(m){for(var P=0,p=0;p<m.length;p++){var y=m.charCodeAt(p);if(y<128)P+=1;else if(y<2048)P+=2;else if(y<55296)P+=3;else if(y<=57343){if(p>=m.length-1)throw new Error(s);p++,P+=4}else throw new Error(s)}return P}u.encodedLength=d;function S(m){for(var P=[],p=0;p<m.length;p++){var y=m[p];if(y&128){var b=void 0;if(y<224){if(p>=m.length)throw new Error(h);var k=m[++p];if((k&192)!==128)throw new Error(h);y=(y&31)<<6|k&63,b=128}else if(y<240){if(p>=m.length-1)throw new Error(h);var k=m[++p],_=m[++p];if((k&192)!==128||(_&192)!==128)throw new Error(h);y=(y&15)<<12|(k&63)<<6|_&63,b=2048}else if(y<248){if(p>=m.length-2)throw new Error(h);var k=m[++p],_=m[++p],v=m[++p];if((k&192)!==128||(_&192)!==128||(v&192)!==128)throw new Error(h);y=(y&15)<<18|(k&63)<<12|(_&63)<<6|v&63,b=65536}else throw new Error(h);if(y<b||y>=55296&&y<=57343)throw new Error(h);if(y>=65536){if(y>1114111)throw new Error(h);y-=65536,P.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}P.push(String.fromCharCode(y))}return P.join("")}u.decode=S},function(a,u,l){a.exports=l(3).default},function(a,u,l){l.r(u);var s=function(){function t(e,n){this.lastId=0,this.prefix=e,this.name=n}return t.prototype.create=function(e){this.lastId++;var n=this.lastId,r=this.prefix+n,c=this.name+"["+n+"]",f=!1,w=function(){f||(e.apply(null,arguments),f=!0)};return this[n]=w,{number:n,id:r,name:c,callback:w}},t.prototype.remove=function(e){delete this[e.number]},t}(),h=new s("_pusher_script_","Pusher.ScriptReceivers"),g={VERSION:"7.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},d=g,S=function(){function t(e){this.options=e,this.receivers=e.receivers||h,this.loading={}}return t.prototype.load=function(e,n,r){var c=this;if(c.loading[e]&&c.loading[e].length>0)c.loading[e].push(r);else{c.loading[e]=[r];var f=M.createScriptRequest(c.getPath(e,n)),w=c.receivers.create(function(x){if(c.receivers.remove(w),c.loading[e]){var R=c.loading[e];delete c.loading[e];for(var A=function(W){W||f.cleanup()},D=0;D<R.length;D++)R[D](x,A)}});f.send(w)}},t.prototype.getRoot=function(e){var n,r=M.getDocument().location.protocol;return e&&e.useTLS||r==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version},t.prototype.getPath=function(e,n){return this.getRoot(n)+"/"+e+this.options.suffix+".js"},t}(),m=S,P=new s("_pusher_dependencies","Pusher.DependenciesReceivers"),p=new m({cdn_http:d.cdn_http,cdn_https:d.cdn_https,version:d.VERSION,suffix:d.dependency_suffix,receivers:P}),y={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},b=function(t){var e="See:",n=y.urls[t];if(!n)return"";var r;return n.fullUrl?r=n.fullUrl:n.path&&(r=y.baseUrl+n.path),r?e+" "+r:""},k={buildLogSuffix:b},_;(function(t){t.UserAuthentication="user-authentication",t.ChannelAuthorization="channel-authorization"})(_||(_={}));var v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),T=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),E=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),O=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),B=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),j=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),F=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),U=function(t){v(e,t);function e(n){var r=this.constructor,c=t.call(this,n)||this;return Object.setPrototypeOf(c,r.prototype),c}return e}(Error),H=function(t){v(e,t);function e(n,r){var c=this.constructor,f=t.call(this,r)||this;return f.status=n,Object.setPrototypeOf(f,c.prototype),f}return e}(Error),de=function(t,e,n,r,c){var f=M.createXHR();f.open("POST",n.endpoint,!0),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var w in n.headers)f.setRequestHeader(w,n.headers[w]);return f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200){var x=void 0,R=!1;try{x=JSON.parse(f.responseText),R=!0}catch{c(new H(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+f.responseText),null)}R&&c(null,x)}else{var A="";switch(r){case _.UserAuthentication:A=k.buildLogSuffix("authenticationEndpoint");break;case _.ChannelAuthorization:A="Clients must be authenticated to join private or presence channels. "+k.buildLogSuffix("authorizationEndpoint");break}c(new H(f.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - "+("received status: "+f.status+" from "+n.endpoint+". "+A)),null)}},f.send(e),f},Te=de;function Z(t){return ir(nr(t))}var Ee=String.fromCharCode,Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tr=function(t){var e=t.charCodeAt(0);return e<128?t:e<2048?Ee(192|e>>>6)+Ee(128|e&63):Ee(224|e>>>12&15)+Ee(128|e>>>6&63)+Ee(128|e&63)},nr=function(t){return t.replace(/[^\x00-\x7F]/g,tr)},rr=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),r=[Ue.charAt(n>>>18),Ue.charAt(n>>>12&63),e>=2?"=":Ue.charAt(n>>>6&63),e>=1?"=":Ue.charAt(n&63)];return r.join("")},ir=window.btoa||function(t){return t.replace(/[\s\S]{1,3}/g,rr)},or=function(){function t(e,n,r,c){var f=this;this.clear=n,this.timer=e(function(){f.timer&&(f.timer=c(f.timer))},r)}return t.prototype.isRunning=function(){return this.timer!==null},t.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},t}(),Bt=or,Dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function sr(t){window.clearTimeout(t)}function ar(t){window.clearInterval(t)}var pe=function(t){Dt(e,t);function e(n,r){return t.call(this,setTimeout,sr,n,function(c){return r(),null})||this}return e}(Bt),cr=function(t){Dt(e,t);function e(n,r){return t.call(this,setInterval,ar,n,function(c){return r(),c})||this}return e}(Bt),ur={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(t){return new pe(0,t)},method:function(t){var e=Array.prototype.slice.call(arguments,1);return function(n){return n[t].apply(n,e.concat(arguments))}}},V=ur;function X(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var c=e[r];for(var f in c)c[f]&&c[f].constructor&&c[f].constructor===Object?t[f]=X(t[f]||{},c[f]):t[f]=c[f]}return t}function lr(){for(var t=["Pusher"],e=0;e<arguments.length;e++)typeof arguments[e]=="string"?t.push(arguments[e]):t.push(Fe(arguments[e]));return t.join(" : ")}function jt(t,e){var n=Array.prototype.indexOf;if(t===null)return-1;if(n&&t.indexOf===n)return t.indexOf(e);for(var r=0,c=t.length;r<c;r++)if(t[r]===e)return r;return-1}function ie(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function Ut(t){var e=[];return ie(t,function(n,r){e.push(r)}),e}function fr(t){var e=[];return ie(t,function(n){e.push(n)}),e}function Pe(t,e,n){for(var r=0;r<t.length;r++)e.call(n||window,t[r],r,t)}function Ft(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r,t,n));return n}function hr(t,e){var n={};return ie(t,function(r,c){n[c]=e(r)}),n}function Ht(t,e){e=e||function(c){return!!c};for(var n=[],r=0;r<t.length;r++)e(t[r],r,t,n)&&n.push(t[r]);return n}function zt(t,e){var n={};return ie(t,function(r,c){(e&&e(r,c,t,n)||Boolean(r))&&(n[c]=r)}),n}function dr(t){var e=[];return ie(t,function(n,r){e.push([r,n])}),e}function qt(t,e){for(var n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1}function pr(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0}function mr(t){return hr(t,function(e){return typeof e=="object"&&(e=Fe(e)),encodeURIComponent(Z(e.toString()))})}function gr(t){var e=zt(t,function(r){return r!==void 0}),n=Ft(dr(mr(e)),V.method("join","=")).join("&");return n}function yr(t){var e=[],n=[];return function r(c,f){var w,x,R;switch(typeof c){case"object":if(!c)return null;for(w=0;w<e.length;w+=1)if(e[w]===c)return{$ref:n[w]};if(e.push(c),n.push(f),Object.prototype.toString.apply(c)==="[object Array]")for(R=[],w=0;w<c.length;w+=1)R[w]=r(c[w],f+"["+w+"]");else{R={};for(x in c)Object.prototype.hasOwnProperty.call(c,x)&&(R[x]=r(c[x],f+"["+JSON.stringify(x)+"]"))}return R;case"number":case"string":case"boolean":return c}}(t,"$")}function Fe(t){try{return JSON.stringify(t)}catch{return JSON.stringify(yr(t))}}var vr=function(){function t(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLog,e)},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogWarn,e)},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.log(this.globalLogError,e)},t.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},t.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},t.prototype.log=function(e){var n=lr.apply(this,arguments);if(mt.log)mt.log(n);else if(mt.logToConsole){var r=e.bind(this);r(n)}},t}(),z=new vr,_r=function(t,e,n,r,c){n.headers!==void 0&&z.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var f=t.nextAuthCallbackID.toString();t.nextAuthCallbackID++;var w=t.getDocument(),x=w.createElement("script");t.auth_callbacks[f]=function(D){c(null,D)};var R="Pusher.auth_callbacks['"+f+"']";x.src=n.endpoint+"?callback="+encodeURIComponent(R)+"&"+e;var A=w.getElementsByTagName("head")[0]||w.documentElement;A.insertBefore(x,A.firstChild)},wr=_r,br=function(){function t(e){this.src=e}return t.prototype.send=function(e){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=e.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){e.callback(r)},n.script.onload=function(){e.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&e.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=e.id+"_error",n.errorScript.text=e.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var c=document.getElementsByTagName("head")[0];c.insertBefore(n.script,c.firstChild),n.errorScript&&c.insertBefore(n.errorScript,n.script.nextSibling)},t.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},t}(),kr=br,Nr=function(){function t(e,n){this.url=e,this.data=n}return t.prototype.send=function(e){if(!this.request){var n=gr(this.data),r=this.url+"/"+e.number+"?"+n;this.request=M.createScriptRequest(r),this.request.send(e)}},t.prototype.cleanup=function(){this.request&&this.request.cleanup()},t}(),Cr=Nr,Sr=function(t,e){return function(n,r){var c="http"+(e?"s":"")+"://",f=c+(t.host||t.options.host)+t.options.path,w=M.createJSONPRequest(f,n),x=M.ScriptReceivers.create(function(R,A){h.remove(x),w.cleanup(),A&&A.host&&(t.host=A.host),r&&r(R,A)});w.send(x)}},xr={name:"jsonp",getAgent:Sr},Tr=xr;function ot(t,e,n){var r=t+(e.useTLS?"s":""),c=e.useTLS?e.hostTLS:e.hostNonTLS;return r+"://"+c+n}function st(t,e){var n="/app/"+t,r="?protocol="+d.PROTOCOL+"&client=js&version="+d.VERSION+(e?"&"+e:"");return n+r}var Er={getInitial:function(t,e){var n=(e.httpPath||"")+st(t,"flash=false");return ot("ws",e,n)}},Pr={getInitial:function(t,e){var n=(e.httpPath||"/pusher")+st(t);return ot("http",e,n)}},Ar={getInitial:function(t,e){return ot("http",e,e.httpPath||"/pusher")},getPath:function(t,e){return st(t)}},Lr=function(){function t(){this._callbacks={}}return t.prototype.get=function(e){return this._callbacks[at(e)]},t.prototype.add=function(e,n,r){var c=at(e);this._callbacks[c]=this._callbacks[c]||[],this._callbacks[c].push({fn:n,context:r})},t.prototype.remove=function(e,n,r){if(!e&&!n&&!r){this._callbacks={};return}var c=e?[at(e)]:Ut(this._callbacks);n||r?this.removeCallback(c,n,r):this.removeAllCallbacks(c)},t.prototype.removeCallback=function(e,n,r){Pe(e,function(c){this._callbacks[c]=Ht(this._callbacks[c]||[],function(f){return n&&n!==f.fn||r&&r!==f.context}),this._callbacks[c].length===0&&delete this._callbacks[c]},this)},t.prototype.removeAllCallbacks=function(e){Pe(e,function(n){delete this._callbacks[n]},this)},t}(),Rr=Lr;function at(t){return"_"+t}var Or=function(){function t(e){this.callbacks=new Rr,this.global_callbacks=[],this.failThrough=e}return t.prototype.bind=function(e,n,r){return this.callbacks.add(e,n,r),this},t.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},t.prototype.unbind=function(e,n,r){return this.callbacks.remove(e,n,r),this},t.prototype.unbind_global=function(e){return e?(this.global_callbacks=Ht(this.global_callbacks||[],function(n){return n!==e}),this):(this.global_callbacks=[],this)},t.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},t.prototype.emit=function(e,n,r){for(var c=0;c<this.global_callbacks.length;c++)this.global_callbacks[c](e,n);var f=this.callbacks.get(e),w=[];if(r?w.push(n,r):n&&w.push(n),f&&f.length>0)for(var c=0;c<f.length;c++)f[c].fn.apply(f[c].context||window,w);else this.failThrough&&this.failThrough(e,n);return this},t}(),ae=Or,Ir=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mr=function(t){Ir(e,t);function e(n,r,c,f,w){var x=t.call(this)||this;return x.initialize=M.transportConnectionInitializer,x.hooks=n,x.name=r,x.priority=c,x.key=f,x.options=w,x.state="new",x.timeline=w.timeline,x.activityTimeout=w.activityTimeout,x.id=x.timeline.generateUniqueID(),x}return e.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},e.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},e.prototype.connect=function(){var n=this;if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(c){return V.defer(function(){n.onError(c),n.changeState("closed")}),!1}return this.bindListeners(),z.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},e.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},e.prototype.send=function(n){var r=this;return this.state==="open"?(V.defer(function(){r.socket&&r.socket.send(n)}),!0):!1},e.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},e.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},e.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},e.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},e.prototype.onMessage=function(n){this.emit("message",n)},e.prototype.onActivity=function(){this.emit("activity")},e.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},e.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},e.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},e.prototype.buildTimelineMessage=function(n){return X({cid:this.id},n)},e}(ae),Br=Mr,Dr=function(){function t(e){this.hooks=e}return t.prototype.isSupported=function(e){return this.hooks.isSupported(e)},t.prototype.createConnection=function(e,n,r,c){return new Br(this.hooks,e,n,r,c)},t}(),ve=Dr,jr=new ve({urls:Er,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(M.getWebSocketAPI())},isSupported:function(){return Boolean(M.getWebSocketAPI())},getSocket:function(t){return M.createWebSocket(t)}}),$t={urls:Pr,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Vt=X({getSocket:function(t){return M.HTTPFactory.createStreamingSocket(t)}},$t),Jt=X({getSocket:function(t){return M.HTTPFactory.createPollingSocket(t)}},$t),Wt={isSupported:function(){return M.isXHRSupported()}},Ur=new ve(X({},Vt,Wt)),Fr=new ve(X({},Jt,Wt)),Hr={ws:jr,xhr_streaming:Ur,xhr_polling:Fr},He=Hr,zr=new ve({file:"sockjs",urls:Ar,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(t,e){return new window.SockJS(t,null,{js_path:p.getPath("sockjs",{useTLS:e.useTLS}),ignore_null_origin:e.ignoreNullOrigin})},beforeOpen:function(t,e){t.send(JSON.stringify({path:e}))}}),Xt={isSupported:function(t){var e=M.isXDRSupported(t.useTLS);return e}},qr=new ve(X({},Vt,Xt)),$r=new ve(X({},Jt,Xt));He.xdr_streaming=qr,He.xdr_polling=$r,He.sockjs=zr;var Vr=He,Jr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wr=function(t){Jr(e,t);function e(){var n=t.call(this)||this,r=n;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return e.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},e}(ae),Xr=new Wr,Kr=function(){function t(e,n,r){this.manager=e,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return t.prototype.createConnection=function(e,n,r,c){var f=this;c=X({},c,{activityTimeout:this.pingDelay});var w=this.transport.createConnection(e,n,r,c),x=null,R=function(){w.unbind("open",R),w.bind("closed",A),x=V.now()},A=function(D){if(w.unbind("closed",A),D.code===1002||D.code===1003)f.manager.reportDeath();else if(!D.wasClean&&x){var W=V.now()-x;W<2*f.maxPingDelay&&(f.manager.reportDeath(),f.pingDelay=Math.max(W/2,f.minPingDelay))}};return w.bind("open",R),w},t.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},t}(),Qr=Kr,Kt={decodeMessage:function(t){try{var e=JSON.parse(t.data),n=e.data;if(typeof n=="string")try{n=JSON.parse(e.data)}catch{}var r={event:e.event,channel:e.channel,data:n};return e.user_id&&(r.user_id=e.user_id),r}catch(c){throw{type:"MessageParseError",error:c,data:t.data}}},encodeMessage:function(t){return JSON.stringify(t)},processHandshake:function(t){var e=Kt.decodeMessage(t);if(e.event==="pusher:connection_established"){if(!e.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:e.data.socket_id,activityTimeout:e.data.activity_timeout*1e3}}else{if(e.event==="pusher:error")return{action:this.getCloseAction(e.data),error:this.getCloseError(e.data)};throw"Invalid handshake"}},getCloseAction:function(t){return t.code<4e3?t.code>=1002&&t.code<=1004?"backoff":null:t.code===4e3?"tls_only":t.code<4100?"refused":t.code<4200?"backoff":t.code<4300?"retry":"refused"},getCloseError:function(t){return t.code!==1e3&&t.code!==1001?{type:"PusherError",data:{code:t.code,message:t.reason||t.message}}:null}},me=Kt,Yr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gr=function(t){Yr(e,t);function e(n,r){var c=t.call(this)||this;return c.id=n,c.transport=r,c.activityTimeout=r.activityTimeout,c.bindListeners(),c}return e.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},e.prototype.send=function(n){return this.transport.send(n)},e.prototype.send_event=function(n,r,c){var f={event:n,data:r};return c&&(f.channel=c),z.debug("Event sent",f),this.send(me.encodeMessage(f))},e.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},e.prototype.close=function(){this.transport.close()},e.prototype.bindListeners=function(){var n=this,r={message:function(f){var w;try{w=me.decodeMessage(f)}catch(x){n.emit("error",{type:"MessageParseError",error:x,data:f.data})}if(w!==void 0){switch(z.debug("Event recd",w),w.event){case"pusher:error":n.emit("error",{type:"PusherError",data:w.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong");break}n.emit("message",w)}},activity:function(){n.emit("activity")},error:function(f){n.emit("error",f)},closed:function(f){c(),f&&f.code&&n.handleCloseEvent(f),n.transport=null,n.emit("closed")}},c=function(){ie(r,function(f,w){n.transport.unbind(w,f)})};ie(r,function(f,w){n.transport.bind(w,f)})},e.prototype.handleCloseEvent=function(n){var r=me.getCloseAction(n),c=me.getCloseError(n);c&&this.emit("error",c),r&&this.emit(r,{action:r,error:c})},e}(ae),Zr=Gr,ei=function(){function t(e,n){this.transport=e,this.callback=n,this.bindListeners()}return t.prototype.close=function(){this.unbindListeners(),this.transport.close()},t.prototype.bindListeners=function(){var e=this;this.onMessage=function(n){e.unbindListeners();var r;try{r=me.processHandshake(n)}catch(c){e.finish("error",{error:c}),e.transport.close();return}r.action==="connected"?e.finish("connected",{connection:new Zr(r.id,e.transport),activityTimeout:r.activityTimeout}):(e.finish(r.action,{error:r.error}),e.transport.close())},this.onClosed=function(n){e.unbindListeners();var r=me.getCloseAction(n)||"backoff",c=me.getCloseError(n);e.finish(r,{error:c})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},t.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},t.prototype.finish=function(e,n){this.callback(X({transport:this.transport,action:e},n))},t}(),ti=ei,ni=function(){function t(e,n){this.timeline=e,this.options=n||{}}return t.prototype.send=function(e,n){this.timeline.isEmpty()||this.timeline.send(M.TimelineTransport.getAgent(this,e),n)},t}(),ri=ni,ii=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oi=function(t){ii(e,t);function e(n,r){var c=t.call(this,function(f,w){z.debug("No callbacks on "+n+" for "+f)})||this;return c.name=n,c.pusher=r,c.subscribed=!1,c.subscriptionPending=!1,c.subscriptionCancelled=!1,c}return e.prototype.authorize=function(n,r){return r(null,{auth:""})},e.prototype.trigger=function(n,r){if(n.indexOf("client-")!==0)throw new C("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var c=k.buildLogSuffix("triggeringClientEvents");z.warn("Client event triggered before channel 'subscription_succeeded' event . "+c)}return this.pusher.send_event(n,r,this.name)},e.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},e.prototype.handleEvent=function(n){var r=n.event,c=n.data;if(r==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(n);else if(r==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(n);else if(r.indexOf("pusher_internal:")!==0){var f={};this.emit(r,c,f)}},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},e.prototype.handleSubscriptionCountEvent=function(n){n.data.subscription_count&&(this.subscriptionCount=n.data.subscription_count),this.emit("pusher:subscription_count",n.data)},e.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,c){r?(n.subscriptionPending=!1,z.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof H?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:c.auth,channel_data:c.channel_data,channel:n.name})}))},e.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},e.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},e.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},e}(ae),ct=oi,si=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ai=function(t){si(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},e}(ct),ut=ai,ci=function(){function t(){this.reset()}return t.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},t.prototype.each=function(e){var n=this;ie(this.members,function(r,c){e(n.get(c))})},t.prototype.setMyID=function(e){this.myID=e},t.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},t.prototype.addMember=function(e){return this.get(e.user_id)===null&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},t.prototype.removeMember=function(e){var n=this.get(e.user_id);return n&&(delete this.members[e.user_id],this.count--),n},t.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},t}(),ui=ci,li=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fi=function(t,e,n,r){return new(n||(n=Promise))(function(c,f){function w(A){try{R(r.next(A))}catch(D){f(D)}}function x(A){try{R(r.throw(A))}catch(D){f(D)}}function R(A){A.done?c(A.value):new n(function(D){D(A.value)}).then(w,x)}R((r=r.apply(t,e||[])).next())})},hi=function(t,e){var n={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},r,c,f,w;return w={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function x(A){return function(D){return R([A,D])}}function R(A){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,c&&(f=A[0]&2?c.return:A[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,A[1])).done)return f;switch(c=0,f&&(A=[A[0]&2,f.value]),A[0]){case 0:case 1:f=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,c=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(f=n.trys,!(f=f.length>0&&f[f.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!f||A[1]>f[0]&&A[1]<f[3])){n.label=A[1];break}if(A[0]===6&&n.label<f[1]){n.label=f[1],f=A;break}if(f&&n.label<f[2]){n.label=f[2],n.ops.push(A);break}f[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(t,n)}catch(D){A=[6,D],c=0}finally{r=f=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},di=function(t){li(e,t);function e(n,r){var c=t.call(this,n,r)||this;return c.members=new ui,c}return e.prototype.authorize=function(n,r){var c=this;t.prototype.authorize.call(this,n,function(f,w){return fi(c,void 0,void 0,function(){var x,R;return hi(this,function(A){switch(A.label){case 0:return f?[3,3]:(w=w,w.channel_data==null?[3,1]:(x=JSON.parse(w.channel_data),this.members.setMyID(x.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(A.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return R=k.buildLogSuffix("authorizationEndpoint"),z.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+R+", ")+"or the user should be signed in."),r("Invalid auth response"),[2];A.label=3;case 3:return r(f,w),[2]}})})})},e.prototype.handleEvent=function(n){var r=n.event;if(r.indexOf("pusher_internal:")===0)this.handleInternalEvent(n);else{var c=n.data,f={};n.user_id&&(f.user_id=n.user_id),this.emit(r,c,f)}},e.prototype.handleInternalEvent=function(n){var r=n.event,c=n.data;switch(r){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(n);break;case"pusher_internal:member_added":var f=this.members.addMember(c);this.emit("pusher:member_added",f);break;case"pusher_internal:member_removed":var w=this.members.removeMember(c);w&&this.emit("pusher:member_removed",w);break}},e.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},e.prototype.disconnect=function(){this.members.reset(),t.prototype.disconnect.call(this)},e}(ut),pi=di,mi=l(1),lt=l(0),gi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),yi=function(t){gi(e,t);function e(n,r,c){var f=t.call(this,n,r)||this;return f.key=null,f.nacl=c,f}return e.prototype.authorize=function(n,r){var c=this;t.prototype.authorize.call(this,n,function(f,w){if(f){r(f,w);return}var x=w.shared_secret;if(!x){r(new Error("No shared_secret key in auth payload for encrypted channel: "+c.name),null);return}c.key=Object(lt.decode)(x),delete w.shared_secret,r(null,w)})},e.prototype.trigger=function(n,r){throw new j("Client events are not currently supported for encrypted channels")},e.prototype.handleEvent=function(n){var r=n.event,c=n.data;if(r.indexOf("pusher_internal:")===0||r.indexOf("pusher:")===0){t.prototype.handleEvent.call(this,n);return}this.handleEncryptedEvent(r,c)},e.prototype.handleEncryptedEvent=function(n,r){var c=this;if(!this.key){z.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!r.ciphertext||!r.nonce){z.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);return}var f=Object(lt.decode)(r.ciphertext);if(f.length<this.nacl.secretbox.overheadLength){z.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+f.length);return}var w=Object(lt.decode)(r.nonce);if(w.length<this.nacl.secretbox.nonceLength){z.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+w.length);return}var x=this.nacl.secretbox.open(f,w,this.key);if(x===null){z.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(R,A){if(R){z.error("Failed to make a request to the authEndpoint: "+A+". Unable to fetch new key, so dropping encrypted event");return}if(x=c.nacl.secretbox.open(f,w,c.key),x===null){z.error("Failed to decrypt event with new key. Dropping encrypted event");return}c.emit(n,c.getDataToEmit(x))});return}this.emit(n,this.getDataToEmit(x))},e.prototype.getDataToEmit=function(n){var r=Object(mi.decode)(n);try{return JSON.parse(r)}catch{return r}},e}(ut),vi=yi,_i=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wi=function(t){_i(e,t);function e(n,r){var c=t.call(this)||this;c.state="initialized",c.connection=null,c.key=n,c.options=r,c.timeline=c.options.timeline,c.usingTLS=c.options.useTLS,c.errorCallbacks=c.buildErrorCallbacks(),c.connectionCallbacks=c.buildConnectionCallbacks(c.errorCallbacks),c.handshakeCallbacks=c.buildHandshakeCallbacks(c.errorCallbacks);var f=M.getNetwork();return f.bind("online",function(){c.timeline.info({netinfo:"online"}),(c.state==="connecting"||c.state==="unavailable")&&c.retryIn(0)}),f.bind("offline",function(){c.timeline.info({netinfo:"offline"}),c.connection&&c.sendActivityCheck()}),c.updateStrategy(),c}return e.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},e.prototype.send=function(n){return this.connection?this.connection.send(n):!1},e.prototype.send_event=function(n,r,c){return this.connection?this.connection.send_event(n,r,c):!1},e.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},e.prototype.isUsingTLS=function(){return this.usingTLS},e.prototype.startConnecting=function(){var n=this,r=function(c,f){c?n.runner=n.strategy.connect(0,r):f.action==="error"?(n.emit("error",{type:"HandshakeError",error:f.error}),n.timeline.error({handshakeError:f.error})):(n.abortConnecting(),n.handshakeCallbacks[f.action](f))};this.runner=this.strategy.connect(0,r)},e.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},e.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var n=this.abandonConnection();n.close()}},e.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},e.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new pe(n||0,function(){r.disconnectInternally(),r.connect()})},e.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},e.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new pe(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},e.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},e.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new pe(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},e.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new pe(this.activityTimeout,function(){n.sendActivityCheck()}))},e.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},e.prototype.buildConnectionCallbacks=function(n){var r=this;return X({},n,{message:function(c){r.resetActivityCheck(),r.emit("message",c)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(c){r.emit("error",c)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},e.prototype.buildHandshakeCallbacks=function(n){var r=this;return X({},n,{connected:function(c){r.activityTimeout=Math.min(r.options.activityTimeout,c.activityTimeout,c.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(c.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},e.prototype.buildErrorCallbacks=function(){var n=this,r=function(c){return function(f){f.error&&n.emit("error",{type:"WebSocketError",error:f.error}),c(f)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},e.prototype.setConnection=function(n){this.connection=n;for(var r in this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},e.prototype.abandonConnection=function(){if(!!this.connection){this.stopActivityCheck();for(var n in this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},e.prototype.updateState=function(n,r){var c=this.state;if(this.state=n,c!==n){var f=n;f==="connected"&&(f+=" with new socket ID "+r.socket_id),z.debug("State changed",c+" -> "+f),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:c,current:n}),this.emit(n,r)}},e.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},e}(ae),bi=wi,ki=function(){function t(){this.channels={}}return t.prototype.add=function(e,n){return this.channels[e]||(this.channels[e]=Ci(e,n)),this.channels[e]},t.prototype.all=function(){return fr(this.channels)},t.prototype.find=function(e){return this.channels[e]},t.prototype.remove=function(e){var n=this.channels[e];return delete this.channels[e],n},t.prototype.disconnect=function(){ie(this.channels,function(e){e.disconnect()})},t}(),Ni=ki;function Ci(t,e){if(t.indexOf("private-encrypted-")===0){if(e.config.nacl)return oe.createEncryptedChannel(t,e,e.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=k.buildLogSuffix("encryptedChannelSupport");throw new j(n+". "+r)}else{if(t.indexOf("private-")===0)return oe.createPrivateChannel(t,e);if(t.indexOf("presence-")===0)return oe.createPresenceChannel(t,e);if(t.indexOf("#")===0)throw new T('Cannot create a channel with name "'+t+'".');return oe.createChannel(t,e)}}var Si={createChannels:function(){return new Ni},createConnectionManager:function(t,e){return new bi(t,e)},createChannel:function(t,e){return new ct(t,e)},createPrivateChannel:function(t,e){return new ut(t,e)},createPresenceChannel:function(t,e){return new pi(t,e)},createEncryptedChannel:function(t,e,n){return new vi(t,e,n)},createTimelineSender:function(t,e){return new ri(t,e)},createHandshake:function(t,e){return new ti(t,e)},createAssistantToTheTransportManager:function(t,e,n){return new Qr(t,e,n)}},oe=Si,xi=function(){function t(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return t.prototype.getAssistant=function(e){return oe.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},t.prototype.isAlive=function(){return this.livesLeft>0},t.prototype.reportDeath=function(){this.livesLeft-=1},t}(),Qt=xi,Ti=function(){function t(e,n){this.strategies=e,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return t.prototype.isSupported=function(){return qt(this.strategies,V.method("isSupported"))},t.prototype.connect=function(e,n){var r=this,c=this.strategies,f=0,w=this.timeout,x=null,R=function(A,D){D?n(null,D):(f=f+1,r.loop&&(f=f%c.length),f<c.length?(w&&(w=w*2,r.timeoutLimit&&(w=Math.min(w,r.timeoutLimit))),x=r.tryStrategy(c[f],e,{timeout:w,failFast:r.failFast},R)):n(!0))};return x=this.tryStrategy(c[f],e,{timeout:w,failFast:this.failFast},R),{abort:function(){x.abort()},forceMinPriority:function(A){e=A,x&&x.forceMinPriority(A)}}},t.prototype.tryStrategy=function(e,n,r,c){var f=null,w=null;return r.timeout>0&&(f=new pe(r.timeout,function(){w.abort(),c(!0)})),w=e.connect(n,function(x,R){x&&f&&f.isRunning()&&!r.failFast||(f&&f.ensureAborted(),c(x,R))}),{abort:function(){f&&f.ensureAborted(),w.abort()},forceMinPriority:function(x){w.forceMinPriority(x)}}},t}(),ge=Ti,Ei=function(){function t(e){this.strategies=e}return t.prototype.isSupported=function(){return qt(this.strategies,V.method("isSupported"))},t.prototype.connect=function(e,n){return Pi(this.strategies,e,function(r,c){return function(f,w){if(c[r].error=f,f){Ai(c)&&n(!0);return}Pe(c,function(x){x.forceMinPriority(w.transport.priority)}),n(null,w)}})},t}(),ft=Ei;function Pi(t,e,n){var r=Ft(t,function(c,f,w,x){return c.connect(e,n(f,x))});return{abort:function(){Pe(r,Li)},forceMinPriority:function(c){Pe(r,function(f){f.forceMinPriority(c)})}}}function Ai(t){return pr(t,function(e){return Boolean(e.error)})}function Li(t){!t.error&&!t.aborted&&(t.abort(),t.aborted=!0)}var Ri=function(){function t(e,n,r){this.strategy=e,this.transports=n,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.usingTLS,c=Ii(r),f=[this.strategy];if(c&&c.timestamp+this.ttl>=V.now()){var w=this.transports[c.transport];w&&(this.timeline.info({cached:!0,transport:c.transport,latency:c.latency}),f.push(new ge([w],{timeout:c.latency*2+1e3,failFast:!0})))}var x=V.now(),R=f.pop().connect(e,function A(D,W){D?(Yt(r),f.length>0?(x=V.now(),R=f.pop().connect(e,A)):n(D)):(Mi(r,W.transport.name,V.now()-x),n(null,W))});return{abort:function(){R.abort()},forceMinPriority:function(A){e=A,R&&R.forceMinPriority(A)}}},t}(),Oi=Ri;function ht(t){return"pusherTransport"+(t?"TLS":"NonTLS")}function Ii(t){var e=M.getLocalStorage();if(e)try{var n=e[ht(t)];if(n)return JSON.parse(n)}catch{Yt(t)}return null}function Mi(t,e,n){var r=M.getLocalStorage();if(r)try{r[ht(t)]=Fe({timestamp:V.now(),transport:e,latency:n})}catch{}}function Yt(t){var e=M.getLocalStorage();if(e)try{delete e[ht(t)]}catch{}}var Bi=function(){function t(e,n){var r=n.delay;this.strategy=e,this.options={delay:r}}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.strategy,c,f=new pe(this.options.delay,function(){c=r.connect(e,n)});return{abort:function(){f.ensureAborted(),c&&c.abort()},forceMinPriority:function(w){e=w,c&&c.forceMinPriority(w)}}},t}(),ze=Bi,Di=function(){function t(e,n,r){this.test=e,this.trueBranch=n,this.falseBranch=r}return t.prototype.isSupported=function(){var e=this.test()?this.trueBranch:this.falseBranch;return e.isSupported()},t.prototype.connect=function(e,n){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(e,n)},t}(),Ae=Di,ji=function(){function t(e){this.strategy=e}return t.prototype.isSupported=function(){return this.strategy.isSupported()},t.prototype.connect=function(e,n){var r=this.strategy.connect(e,function(c,f){f&&r.abort(),n(c,f)});return r},t}(),Ui=ji;function Le(t){return function(){return t.isSupported()}}var Fi=function(t,e,n){var r={};function c(fn,Vo,Jo,Wo,Xo){var hn=n(t,fn,Vo,Jo,Wo,Xo);return r[fn]=hn,hn}var f=Object.assign({},e,{hostNonTLS:t.wsHost+":"+t.wsPort,hostTLS:t.wsHost+":"+t.wssPort,httpPath:t.wsPath}),w=Object.assign({},f,{useTLS:!0}),x=Object.assign({},e,{hostNonTLS:t.httpHost+":"+t.httpPort,hostTLS:t.httpHost+":"+t.httpsPort,httpPath:t.httpPath}),R={loop:!0,timeout:15e3,timeoutLimit:6e4},A=new Qt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),D=new Qt({lives:2,minPingDelay:1e4,maxPingDelay:t.activityTimeout}),W=c("ws","ws",3,f,A),te=c("wss","ws",3,w,A),Fo=c("sockjs","sockjs",1,x),on=c("xhr_streaming","xhr_streaming",1,x,D),Ho=c("xdr_streaming","xdr_streaming",1,x,D),sn=c("xhr_polling","xhr_polling",1,x),zo=c("xdr_polling","xdr_polling",1,x),an=new ge([W],R),qo=new ge([te],R),$o=new ge([Fo],R),cn=new ge([new Ae(Le(on),on,Ho)],R),un=new ge([new Ae(Le(sn),sn,zo)],R),ln=new ge([new Ae(Le(cn),new ft([cn,new ze(un,{delay:4e3})]),un)],R),gt=new Ae(Le(ln),ln,$o),yt;return e.useTLS?yt=new ft([an,new ze(gt,{delay:2e3})]):yt=new ft([an,new ze(qo,{delay:2e3}),new ze(gt,{delay:5e3})]),new Oi(new Ui(new Ae(Le(W),yt,gt)),r,{ttl:18e5,timeline:e.timeline,useTLS:e.useTLS})},Hi=Fi,zi=function(){var t=this;t.timeline.info(t.buildTimelineMessage({transport:t.name+(t.options.useTLS?"s":"")})),t.hooks.isInitialized()?t.changeState("initialized"):t.hooks.file?(t.changeState("initializing"),p.load(t.hooks.file,{useTLS:t.options.useTLS},function(e,n){t.hooks.isInitialized()?(t.changeState("initialized"),n(!0)):(e&&t.onError(e),t.onClose(),n(!1))})):t.onClose()},qi={getRequest:function(t){var e=new window.XDomainRequest;return e.ontimeout=function(){t.emit("error",new E),t.close()},e.onerror=function(n){t.emit("error",n),t.close()},e.onprogress=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText)},e.onload=function(){e.responseText&&e.responseText.length>0&&t.onChunk(200,e.responseText),t.emit("finished",200),t.close()},e},abortRequest:function(t){t.ontimeout=t.onerror=t.onprogress=t.onload=null,t.abort()}},$i=qi,Vi=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ji=256*1024,Wi=function(t){Vi(e,t);function e(n,r,c){var f=t.call(this)||this;return f.hooks=n,f.method=r,f.url=c,f}return e.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},M.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},e.prototype.close=function(){this.unloader&&(M.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},e.prototype.onChunk=function(n,r){for(;;){var c=this.advanceBuffer(r);if(c)this.emit("chunk",{status:n,data:c});else break}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},e.prototype.advanceBuffer=function(n){var r=n.slice(this.position),c=r.indexOf(`
`);return c!==-1?(this.position+=c+1,r.slice(0,c)):null},e.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>Ji},e}(ae),Xi=Wi,dt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.OPEN=1]="OPEN",t[t.CLOSED=3]="CLOSED"})(dt||(dt={}));var ye=dt,Ki=1,Qi=function(){function t(e,n){this.hooks=e,this.session=Zt(1e3)+"/"+eo(8),this.location=Yi(n),this.readyState=ye.CONNECTING,this.openStream()}return t.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},t.prototype.ping=function(){this.hooks.sendHeartbeat(this)},t.prototype.close=function(e,n){this.onClose(e,n,!0)},t.prototype.sendRaw=function(e){if(this.readyState===ye.OPEN)try{return M.createSocketRequest("POST",Gt(Gi(this.location,this.session))).start(e),!0}catch{return!1}else return!1},t.prototype.reconnect=function(){this.closeStream(),this.openStream()},t.prototype.onClose=function(e,n,r){this.closeStream(),this.readyState=ye.CLOSED,this.onclose&&this.onclose({code:e,reason:n,wasClean:r})},t.prototype.onChunk=function(e){if(e.status===200){this.readyState===ye.OPEN&&this.onActivity();var n,r=e.data.slice(0,1);switch(r){case"o":n=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(e.data.slice(1)||"[]");for(var c=0;c<n.length;c++)this.onEvent(n[c]);break;case"m":n=JSON.parse(e.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(e.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}},t.prototype.onOpen=function(e){this.readyState===ye.CONNECTING?(e&&e.hostname&&(this.location.base=Zi(this.location.base,e.hostname)),this.readyState=ye.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},t.prototype.onEvent=function(e){this.readyState===ye.OPEN&&this.onmessage&&this.onmessage({data:e})},t.prototype.onActivity=function(){this.onactivity&&this.onactivity()},t.prototype.onError=function(e){this.onerror&&this.onerror(e)},t.prototype.openStream=function(){var e=this;this.stream=M.createSocketRequest("POST",Gt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){e.onChunk(n)}),this.stream.bind("finished",function(n){e.hooks.onFinished(e,n)}),this.stream.bind("buffer_too_long",function(){e.reconnect()});try{this.stream.start()}catch(n){V.defer(function(){e.onError(n),e.onClose(1006,"Could not start streaming",!1)})}},t.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},t}();function Yi(t){var e=/([^\?]*)\/*(\??.*)/.exec(t);return{base:e[1],queryString:e[2]}}function Gi(t,e){return t.base+"/"+e+"/xhr_send"}function Gt(t){var e=t.indexOf("?")===-1?"?":"&";return t+e+"t="+ +new Date+"&n="+Ki++}function Zi(t,e){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t);return n[1]+e+n[3]}function Zt(t){return Math.floor(Math.random()*t)}function eo(t){for(var e=[],n=0;n<t;n++)e.push(Zt(32).toString(32));return e.join("")}var to=Qi,no={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr_streaming"+t.queryString},onHeartbeat:function(t){t.sendRaw("[]")},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){t.onClose(1006,"Connection interrupted ("+e+")",!1)}},ro=no,io={getReceiveURL:function(t,e){return t.base+"/"+e+"/xhr"+t.queryString},onHeartbeat:function(){},sendHeartbeat:function(t){t.sendRaw("[]")},onFinished:function(t,e){e===200?t.reconnect():t.onClose(1006,"Connection interrupted ("+e+")",!1)}},oo=io,so={getRequest:function(t){var e=M.getXHRAPI(),n=new e;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&t.onChunk(n.status,n.responseText),t.emit("finished",n.status),t.close();break}},n},abortRequest:function(t){t.onreadystatechange=null,t.abort()}},ao=so,co={createStreamingSocket:function(t){return this.createSocket(ro,t)},createPollingSocket:function(t){return this.createSocket(oo,t)},createSocket:function(t,e){return new to(t,e)},createXHR:function(t,e){return this.createRequest(ao,t,e)},createRequest:function(t,e,n){return new Xi(t,e,n)}},en=co;en.createXDR=function(t,e){return this.createRequest($i,t,e)};var uo=en,lo={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:h,DependenciesReceivers:P,getDefaultStrategy:Hi,Transports:Vr,transportConnectionInitializer:zi,HTTPFactory:uo,TimelineTransport:Tr,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(t){var e=this;window.Pusher=t;var n=function(){e.onDocumentBody(t.ready)};window.JSON?n():p.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Te,jsonp:wr}},onDocumentBody:function(t){var e=this;document.body?t():setTimeout(function(){e.onDocumentBody(t)},0)},createJSONPRequest:function(t,e){return new Cr(t,e)},createScriptRequest:function(t){return new kr(t)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var t=this.getXHRAPI();return new t},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Xr},createWebSocket:function(t){var e=this.getWebSocketAPI();return new e(t)},createSocketRequest:function(t,e){if(this.isXHRSupported())return this.HTTPFactory.createXHR(t,e);if(this.isXDRSupported(e.indexOf("https:")===0))return this.HTTPFactory.createXDR(t,e);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var t=this.getXHRAPI();return Boolean(t)&&new t().withCredentials!==void 0},isXDRSupported:function(t){var e=t?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===e},addUnloadListener:function(t){window.addEventListener!==void 0?window.addEventListener("unload",t,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",t)},removeUnloadListener:function(t){window.addEventListener!==void 0?window.removeEventListener("unload",t,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",t)}},M=lo,pt;(function(t){t[t.ERROR=3]="ERROR",t[t.INFO=6]="INFO",t[t.DEBUG=7]="DEBUG"})(pt||(pt={}));var qe=pt,fo=function(){function t(e,n,r){this.key=e,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return t.prototype.log=function(e,n){e<=this.options.level&&(this.events.push(X({},n,{timestamp:V.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},t.prototype.error=function(e){this.log(qe.ERROR,e)},t.prototype.info=function(e){this.log(qe.INFO,e)},t.prototype.debug=function(e){this.log(qe.DEBUG,e)},t.prototype.isEmpty=function(){return this.events.length===0},t.prototype.send=function(e,n){var r=this,c=X({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(c,function(f,w){f||r.sent++,n&&n(f,w)}),!0},t.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},t}(),ho=fo,po=function(){function t(e,n,r,c){this.name=e,this.priority=n,this.transport=r,this.options=c||{}}return t.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},t.prototype.connect=function(e,n){var r=this;if(this.isSupported()){if(this.priority<e)return tn(new O,n)}else return tn(new U,n);var c=!1,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),w=null,x=function(){f.unbind("initialized",x),f.connect()},R=function(){w=oe.createHandshake(f,function(te){c=!0,W(),n(null,te)})},A=function(te){W(),n(te)},D=function(){W();var te;te=Fe(f),n(new B(te))},W=function(){f.unbind("initialized",x),f.unbind("open",R),f.unbind("error",A),f.unbind("closed",D)};return f.bind("initialized",x),f.bind("open",R),f.bind("error",A),f.bind("closed",D),f.initialize(),{abort:function(){c||(W(),w?w.close():f.close())},forceMinPriority:function(te){c||r.priority<te&&(w?w.close():f.close())}}},t}(),mo=po;function tn(t,e){return V.defer(function(){e(t)}),{abort:function(){},forceMinPriority:function(){}}}var go=M.Transports,yo=function(t,e,n,r,c,f){var w=go[n];if(!w)throw new F(n);var x=(!t.enabledTransports||jt(t.enabledTransports,e)!==-1)&&(!t.disabledTransports||jt(t.disabledTransports,e)===-1),R;return x?(c=Object.assign({ignoreNullOrigin:t.ignoreNullOrigin},c),R=new mo(e,r,f?f.getAssistant(w):w,c)):R=vo,R},vo={isSupported:function(){return!1},connect:function(t,e){var n=V.defer(function(){e(new U)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},_o=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);return n},wo=function(t){if(typeof M.getAuthorizers()[t.transport]=="undefined")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=_o(e,t);M.getAuthorizers()[t.transport](M,r,t,_.UserAuthentication,n)}},bo=wo,ko=function(t,e){var n="socket_id="+encodeURIComponent(t.socketId);n+="&channel_name="+encodeURIComponent(t.channelName);for(var r in e.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(e.params[r]);return n},No=function(t){if(typeof M.getAuthorizers()[t.transport]=="undefined")throw"'"+t.transport+"' is not a recognized auth transport";return function(e,n){var r=ko(e,t);M.getAuthorizers()[t.transport](M,r,t,_.ChannelAuthorization,n)}},Co=No,So=function(t,e,n){var r={authTransport:e.transport,authEndpoint:e.endpoint,auth:{params:e.params,headers:e.headers}};return function(c,f){var w=t.channel(c.channelName),x=n(w,r);x.authorize(c.socketId,f)}},$e=function(){return $e=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&(t[c]=e[c])}return t},$e.apply(this,arguments)};function xo(t,e){var n={activityTimeout:t.activityTimeout||d.activityTimeout,cluster:t.cluster||d.cluster,httpPath:t.httpPath||d.httpPath,httpPort:t.httpPort||d.httpPort,httpsPort:t.httpsPort||d.httpsPort,pongTimeout:t.pongTimeout||d.pongTimeout,statsHost:t.statsHost||d.stats_host,unavailableTimeout:t.unavailableTimeout||d.unavailableTimeout,wsPath:t.wsPath||d.wsPath,wsPort:t.wsPort||d.wsPort,wssPort:t.wssPort||d.wssPort,enableStats:Ao(t),httpHost:To(t),useTLS:Po(t),wsHost:Eo(t),userAuthenticator:Lo(t),channelAuthorizer:Oo(t,e)};return"disabledTransports"in t&&(n.disabledTransports=t.disabledTransports),"enabledTransports"in t&&(n.enabledTransports=t.enabledTransports),"ignoreNullOrigin"in t&&(n.ignoreNullOrigin=t.ignoreNullOrigin),"timelineParams"in t&&(n.timelineParams=t.timelineParams),"nacl"in t&&(n.nacl=t.nacl),n}function To(t){return t.httpHost?t.httpHost:t.cluster?"sockjs-"+t.cluster+".pusher.com":d.httpHost}function Eo(t){return t.wsHost?t.wsHost:t.cluster?nn(t.cluster):nn(d.cluster)}function nn(t){return"ws-"+t+".pusher.com"}function Po(t){return M.getProtocol()==="https:"?!0:t.forceTLS!==!1}function Ao(t){return"enableStats"in t?t.enableStats:"disableStats"in t?!t.disableStats:!1}function Lo(t){var e=$e({},d.userAuthentication,t.userAuthentication);return"customHandler"in e&&e.customHandler!=null?e.customHandler:bo(e)}function Ro(t,e){var n;return"channelAuthorization"in t?n=$e({},d.channelAuthorization,t.channelAuthorization):(n={transport:t.authTransport||d.authTransport,endpoint:t.authEndpoint||d.authEndpoint},"auth"in t&&("params"in t.auth&&(n.params=t.auth.params),"headers"in t.auth&&(n.headers=t.auth.headers)),"authorizer"in t&&(n.customHandler=So(e,n,t.authorizer))),n}function Oo(t,e){var n=Ro(t,e);return"customHandler"in n&&n.customHandler!=null?n.customHandler:Co(n)}function Io(){var t,e,n=new Promise(function(r,c){t=r,e=c});return{promise:n,resolve:t,reject:e}}var Mo=Io,Bo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,c){r.__proto__=c}||function(r,c){for(var f in c)c.hasOwnProperty(f)&&(r[f]=c[f])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Do=function(t){Bo(e,t);function e(n){var r=t.call(this,function(c,f){z.debug("No callbacks on user for "+c)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.signinDonePromise=null,r._signinDoneResolve=null,r._onAuthorize=function(c,f){if(c){z.warn("Error during signin: "+c),r._cleanup();return}r.pusher.send_event("pusher:signin",{auth:f.auth,user_data:f.user_data})},r.pusher=n,r.pusher.connection.bind("state_change",function(c){var f=c.previous,w=c.current;f!=="connected"&&w==="connected"&&r._signin(),f==="connected"&&w!=="connected"&&(r._cleanup(),r._newSigninPromiseIfNeeded())}),r.pusher.connection.bind("message",function(c){var f=c.event;f==="pusher:signin_success"&&r._onSigninSuccess(c.data),r.serverToUserChannel&&r.serverToUserChannel.name===c.channel&&r.serverToUserChannel.handleEvent(c)}),r}return e.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},e.prototype._signin=function(){!this.signin_requested||(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},e.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{z.error("Failed parsing user data after signin: "+n.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){z.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},e.prototype._subscribeChannels=function(){var n=this,r=function(c){c.subscriptionPending&&c.subscriptionCancelled?c.reinstateSubscription():!c.subscriptionPending&&n.pusher.connection.state==="connected"&&c.subscribe()};this.serverToUserChannel=new ct("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(c,f){c.indexOf("pusher_internal:")===0||c.indexOf("pusher:")===0||n.emit(c,f)}),r(this.serverToUserChannel)},e.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},e.prototype._newSigninPromiseIfNeeded=function(){if(!!this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var n=Mo(),r=n.promise,c=n.resolve;r.done=!1;var f=function(){r.done=!0};r.then(f).catch(f),this.signinDonePromise=r,this._signinDoneResolve=c}},e}(ae),jo=Do,rn=function(){function t(e,n){var r=this;if(Uo(e),n=n||{},!n.cluster&&!(n.wsHost||n.httpHost)){var c=k.buildLogSuffix("javascriptQuickStart");z.warn("You should always specify a cluster when connecting. "+c)}"disableStats"in n&&z.warn("The disableStats option is deprecated in favor of enableStats"),this.key=e,this.config=xo(n,this),this.channels=oe.createChannels(),this.global_emitter=new ae,this.sessionID=Math.floor(Math.random()*1e9),this.timeline=new ho(this.key,this.sessionID,{cluster:this.config.cluster,features:t.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:qe.INFO,version:d.VERSION}),this.config.enableStats&&(this.timelineSender=oe.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+M.TimelineTransport.name}));var f=function(w){return M.getDefaultStrategy(r.config,w,yo)};this.connection=oe.createConnectionManager(this.key,{getStrategy:f,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(w){var x=w.event,R=x.indexOf("pusher_internal:")===0;if(w.channel){var A=r.channel(w.channel);A&&A.handleEvent(w)}R||r.global_emitter.emit(w.event,w.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(w){z.warn(w)}),t.instances.push(this),this.timeline.info({instances:t.instances.length}),this.user=new jo(this),t.isReady&&this.connect()}return t.ready=function(){t.isReady=!0;for(var e=0,n=t.instances.length;e<n;e++)t.instances[e].connect()},t.getClientFeatures=function(){return Ut(zt({ws:M.Transports.ws},function(e){return e.isSupported({})}))},t.prototype.channel=function(e){return this.channels.find(e)},t.prototype.allChannels=function(){return this.channels.all()},t.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new cr(6e4,function(){n.send(e)})}},t.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},t.prototype.bind=function(e,n,r){return this.global_emitter.bind(e,n,r),this},t.prototype.unbind=function(e,n,r){return this.global_emitter.unbind(e,n,r),this},t.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},t.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},t.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},t.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},t.prototype.subscribe=function(e){var n=this.channels.add(e,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n},t.prototype.unsubscribe=function(e){var n=this.channels.find(e);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(e),n&&n.subscribed&&n.unsubscribe())},t.prototype.send_event=function(e,n,r){return this.connection.send_event(e,n,r)},t.prototype.shouldUseTLS=function(){return this.config.useTLS},t.prototype.signin=function(){this.user.signin()},t.instances=[],t.isReady=!1,t.logToConsole=!1,t.Runtime=M,t.ScriptReceivers=M.ScriptReceivers,t.DependenciesReceivers=M.DependenciesReceivers,t.auth_callbacks=M.auth_callbacks,t}(),mt=u.default=rn;function Uo(t){if(t==null)throw"You must pass your app key when you instantiate Pusher."}M.setup(rn)}])})})(jn);var vs=ys(jn.exports),L="/Users/justaashir/Documents/Kiwify/upsell-vite/src/pix-form.jsx";const _s=new vs("18fb54a8675678498476",{cluster:"us2",authEndpoint:"https://checkout-api.kiwify.com.br/pusher/auth"});class ws extends K{constructor(){super();q(this,"changeViewToQR",()=>{clearInterval(this.state.timerFunc),this.setState({view:"qr"})});q(this,"changeViewToHelp",()=>{this.startTimer(120),this.setState({view:"help"})});q(this,"copyPixQR",()=>(ds(this.props.pixResponse.pix_qrcode),this.setState({pixCodeCopied:!0}),setTimeout(()=>{this.setState({pixCodeCopied:!1})},2e3),!0));q(this,"toggleQRMobile",()=>{this.setState({showQRMobile:!this.state.showQRMobile})});q(this,"startTimer",(a,u)=>{var l=a,s,h;let g=this;this.setState({time:"02:00"});var d=setInterval(function(){s=parseInt(l/60,10),h=parseInt(l%60,10),s=s<10?"0"+s:s,h=h<10?"0"+h:h,g.setState({time:s+":"+h}),--l<0&&(l=a)},1e3);this.setState({timerFunc:d})});this.state={pixCodeCopied:!1,response:{},isProcessing:!1,showQRMobile:!1,view:"qr",time:"02:00",timerFunc:null}}componentWillMount(){let a=`private-pix-${this.props.pixResponse.order?this.props.pixResponse.order:this.props.pixResponse.order_ref_id}`;const u=_s.subscribe(a);u.bind("processing",l=>{this.setState({isProcessing:!0})}),u.bind("status-changed",async l=>{if(l.status==="paid")if(nextUpsellURL){const{upsell_token:s}=l;let h=At(this.props.data.redirect,s,this.props.data.order_amount,!0,this.props.paymentVersion);ne(nextUpsellURL,h)}else this.props.data.redirect!=="undefined"&&this.props.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.props.changeModalType("payment-only");else this.props.data.redirect!=="undefined"&&this.props.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.props.data.redirect}`):this.changeModalType("payment-only")})}render(a,u){return N("div",{children:N("div",{children:[u.isProcessing?N("div",{class:"kw-absolute kw-z-50 kw-bg-black kw-bg-opacity-25 kw-h-full kw-rounded-md kw-w-full kw-left-0 kw-top-0 kw-flex kw-items-center kw-flex-col kw-justify-center",children:N("div",{class:"kw-w-8/12 kw-py-8 kw-shadow-lg kw-bg-white sm:kw-rounded-lg kw-rounded-md kw-flex kw-flex-col kw-items-center kw-justify-center",children:[N("svg",{className:"kw-animate-spin kw-my-4 kw-h-16 kw-w-16 kw-text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:L,lineNumber:57,columnNumber:19},this),N("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:L,lineNumber:58,columnNumber:19},this)]},void 0,!0,{fileName:L,lineNumber:56,columnNumber:17},this),N("div",{class:"kw-flex kw-justify-center kw-text-sm kw-text-gray-700 kw-text-center",children:"Por favor, aguarde. N\xE3o feche ou saia dessa p\xE1gina"},void 0,!1,{fileName:L,lineNumber:61,columnNumber:17},this)]},void 0,!0,{fileName:L,lineNumber:55,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:54,columnNumber:34},this):"",N("div",{className:"kw-flex kw-items-center kw-justify-end kw-mb-4",children:N("svg",{onClick:a.onCancel,xmlns:"http://www.w3.org/2000/svg",class:"kw-h-6 kw-w-6 kw-cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:N("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},void 0,!1,{fileName:L,lineNumber:69,columnNumber:15},this)},void 0,!1,{fileName:L,lineNumber:68,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:66,columnNumber:11},this),N("div",{id:"kiwify-upsell-modal-pix",className:"kw-font-sans kw-flex kw-items-center kw-justify-center kw-flex-col",children:[u.view==="qr"?N("div",{children:[N("div",{class:"kw-text-2xl kw-font-bold kw-font-sans kw-text-center kw-text-[#38a169]",children:"Agora finalize o pagamento"},void 0,!1,{fileName:L,lineNumber:75,columnNumber:13},this),N("div",{class:"kw-block md:kw-hidden kw-text-black kw-text-left kw-mt-8",children:["1. Aperte em ",N("b",{children:'"Copiar C\xF3digo"'},void 0,!1,{fileName:L,lineNumber:77,columnNumber:28},this),".",N("br",{},void 0,!1,{fileName:L,lineNumber:77,columnNumber:51},this)," 2. Abra o app do seu banco e entre na op\xE7\xE3o Pix.",N("br",{},void 0,!1,{fileName:L,lineNumber:77,columnNumber:106},this)," 3. Escolha a op\xE7\xE3o ",N("b",{children:"Pagar / Pix copia e cola"},void 0,!1,{fileName:L,lineNumber:77,columnNumber:132},this),".",N("br",{},void 0,!1,{fileName:L,lineNumber:77,columnNumber:164},this)," 4. Depois, confirme o pagamento. ",N("br",{},void 0,!1,{fileName:L,lineNumber:77,columnNumber:204},this)]},void 0,!0,{fileName:L,lineNumber:76,columnNumber:13},this),N("div",{class:"kw-hidden md:kw-block kw-text-black kw-text-left kw-mt-8",children:["1. Abra o app do seu banco e entre na op\xE7\xE3o ",N("b",{children:"Pix"},void 0,!1,{fileName:L,lineNumber:80,columnNumber:59},this),".",N("br",{},void 0,!1,{fileName:L,lineNumber:80,columnNumber:70},this)," 2. Escolha a op\xE7\xE3o ",N("b",{children:"Pagar / Pix copia e cola"},void 0,!1,{fileName:L,lineNumber:80,columnNumber:96},this)," .",N("br",{},void 0,!1,{fileName:L,lineNumber:80,columnNumber:129},this)," 3. Escaneie o QR code. Se preferir, copie e cole o c\xF3digo.",N("br",{},void 0,!1,{fileName:L,lineNumber:80,columnNumber:194},this)," 4. Depois, confirme o pagamento. ",N("br",{},void 0,!1,{fileName:L,lineNumber:80,columnNumber:234},this)]},void 0,!0,{fileName:L,lineNumber:79,columnNumber:13},this),N("div",{class:"kw-text-center kw-font-sans kw-text-black kw-mt-2",children:"A aprova\xE7\xE3o leva no m\xE1ximo 2 minutos."},void 0,!1,{fileName:L,lineNumber:83,columnNumber:13},this),N("div",{className:"kw-flex kw-items-center kw-justify-center kw-mt-8",children:[N("div",{className:"kw-hidden md:kw-block",children:N("img",{src:a.pixResponse.qr},void 0,!1,{fileName:L,lineNumber:89,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:88,columnNumber:15},this),u.showQRMobile?N("div",{className:"md:kw-hidden",children:N("img",{src:a.pixResponse.qr},void 0,!1,{fileName:L,lineNumber:93,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:92,columnNumber:38},this):""]},void 0,!0,{fileName:L,lineNumber:87,columnNumber:13},this),N("div",{children:[N("div",{onClick:this.copyPixQR,className:"kw-flex kw-relative kw-items-center kw-justify-center kw-border kw-text-white kw-bg-gray-800 kw-font-sans kw-font-bold kw-cursor-pointer kw-p-3 kw-text-sm kw-rounded kw-text-center",children:u.pixCodeCopied?N("div",{className:"kw-flex kw-relative kw-text-green-500 kw-items-center kw-justify-between kw-w-full",children:[N("div",{},void 0,!1,{fileName:L,lineNumber:103,columnNumber:19},this),"C\xD3DIGO COPIADO",N("svg",{xmlns:"http://www.w3.org/2000/svg",style:"width: 20px;",className:"kw-text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:N("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 13l4 4L19 7"},void 0,!1,{fileName:L,lineNumber:106,columnNumber:21},this)},void 0,!1,{fileName:L,lineNumber:105,columnNumber:19},this)]},void 0,!0,{fileName:L,lineNumber:102,columnNumber:26},this):N("div",{className:"kw-flex kw-relative kw-items-center kw-justify-center kw-w-full",children:[N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"kw-mr-1",style:"width: 20px;",children:[N("path",{d:"M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"},void 0,!1,{fileName:L,lineNumber:100,columnNumber:140},this)," ",N("path",{d:"M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"},void 0,!1,{fileName:L,lineNumber:100,columnNumber:256},this)]},void 0,!0,{fileName:L,lineNumber:100,columnNumber:19},this),"COPIAR C\xD3DIGO PIX"]},void 0,!0,{fileName:L,lineNumber:99,columnNumber:42},this)},void 0,!1,{fileName:L,lineNumber:98,columnNumber:15},this),N("div",{onClick:this.toggleQRMobile,className:"kw-flex md:kw-hidden kw-relative kw-bg-white kw-font-bold kw-font-sans kw-items-center kw-text-gray-700 kw-justify-center kw-border kw-border-gray-100 kw-cursor-pointer kw-p-3 kw-text-sm kw-rounded kw-text-center kw-mt-2",style:"border-color: rgb(210, 214, 220); border-style: solid;",children:[N("svg",{xmlns:"http://www.w3.org/2000/svg",className:"kw-mr-1",style:"width: 20px;",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:N("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"},void 0,!1,{fileName:L,lineNumber:112,columnNumber:19},this)},void 0,!1,{fileName:L,lineNumber:111,columnNumber:17},this),u.showQRMobile?"ESCONDER O QR Code":"MOSTRAR O QR Code"]},void 0,!0,{fileName:L,lineNumber:110,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:97,columnNumber:13},this)]},void 0,!0,{fileName:L,lineNumber:74,columnNumber:11},this):N("div",{className:"kw-w-full kw-font-sans",children:[N("h3",{class:"kw-text-2xl kw-font-bold kw-text-center kw-text-[#ed8936]",children:"Pagamento em an\xE1lise!"},void 0,!1,{fileName:L,lineNumber:119,columnNumber:13},this),N("div",{class:"kw-bg-[#edf2f7] kw-p-4 kw-mt-4",children:[N("div",{class:"kw-text-lg kw-text-center",children:"Tempo restante para aprova\xE7\xE3o:"},void 0,!1,{fileName:L,lineNumber:121,columnNumber:15},this),N("div",{class:"kw-flex kw-justify-center kw-items-center",children:N("div",{class:"kw-border kw-border-solid kw-border-gray-100 kw-p-2 kw-w-full kw-text-xl kw-text-center kw-shadow-inner kw-font-bold kw-rounded-lg kw-bg-white",children:N("span",{children:u.time},void 0,!1,{fileName:L,lineNumber:126,columnNumber:19},this)},void 0,!1,{fileName:L,lineNumber:125,columnNumber:17},this)},void 0,!1,{fileName:L,lineNumber:124,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:120,columnNumber:13},this),N("div",{class:"kw-rounded kw-border kw-border-solid kw-border-gray-200 kw-m-4 kw-p-4 kw-py-6 kw-text-lg",children:[N("div",{class:"font-bold",children:"Estamos aguardando a confirma\xE7\xE3o do pagamento pelo banco. Isso pode levar 1-2 minutos."},void 0,!1,{fileName:L,lineNumber:132,columnNumber:15},this),N("div",{children:"Quando o pagamento for identificado, essa tela atualizar\xE1 automaticamente, e voc\xEA tamb\xE9m vai receber um email."},void 0,!1,{fileName:L,lineNumber:133,columnNumber:15},this)]},void 0,!0,{fileName:L,lineNumber:131,columnNumber:13},this),N("div",{class:"kw-text-center kw-text-lg kw-text-gray-700",children:"Ainda n\xE3o fez o pagamento?"},void 0,!1,{fileName:L,lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:L,lineNumber:118,columnNumber:11},this),N("div",{className:"kw-w-full kw-mt-4",children:u.view==="qr"?N("div",{onClick:this.changeViewToHelp,className:"kw-flex kw-cursor-pointer kw-font-sans kw-underline hover:kw-no-underline kw-relative kw-uppercase kw-justify-center kw-w-full kw-text-[#2b6cb0] kw-font-bold kw-rounded kw-text-center",children:"J\xE1 paguei o Pix"},void 0,!1,{fileName:L,lineNumber:144,columnNumber:13},this):N("div",{onClick:this.changeViewToQR,className:"kw-flex kw-cursor-pointer kw-font-sans kw-underline hover:kw-no-underline kw-relative kw-uppercase kw-justify-center kw-w-full kw-text-[#2b6cb0] kw-font-bold kw-rounded kw-text-center",children:"Pague agora com Pix"},void 0,!1,{fileName:L,lineNumber:145,columnNumber:13},this)},void 0,!1,{fileName:L,lineNumber:142,columnNumber:9},this),N("div",{class:"kw-flex kw-text-xl kw-font-sans kw-w-full kw-font-bold kw-flex-row kw-p-4 kw-mt-4",style:"border-top:1px solid rgb(229,231,235)",children:[N("div",{class:"kw-flex-1",children:"TOTAL"},void 0,!1,{fileName:L,lineNumber:150,columnNumber:11},this),N("div",{class:"kw-flex-1 kw-text-right",children:ee(a.pixResponse.amount)},void 0,!1,{fileName:L,lineNumber:151,columnNumber:11},this)]},void 0,!0,{fileName:L,lineNumber:149,columnNumber:9},this)]},void 0,!0,{fileName:L,lineNumber:72,columnNumber:11},this)]},void 0,!0,{fileName:L,lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:L,lineNumber:52,columnNumber:7})}}var $="/Users/justaashir/Documents/Kiwify/upsell-vite/src/modal-upsell.jsx";class bs extends K{constructor(a){super();q(this,"onCharge",()=>{this.setState({isLoadingCharge:!0})});q(this,"renderForm",()=>{if(this.props.type==="credit-card")return N(ms,{setupFeeEnabled:this.props.setupFeeEnabled,paymentVersion:this.props.paymentVersion,changeModalType:this.props.changeModalType,data:this.props.data,isLoadingCharge:this.state.isLoadingCharge},void 0,!1,{fileName:$,lineNumber:93,columnNumber:14});if(this.props.type==="payment-only")return N(gs,{},void 0,!1,{fileName:$,lineNumber:95,columnNumber:14});if(this.props.type==="pix")return N(ws,{paymentVersion:this.props.paymentVersion,data:this.props.data,changeModalType:this.props.changeModalType,onCancel:this.props.onCancel,pixResponse:this.props.pixResponse},void 0,!1,{fileName:$,lineNumber:97,columnNumber:14})});this.state={isLoadingCharge:!1}}componentWillMount(){this.props.type==="pix"&&(this.syncHeight(),window.addEventListener("resize",this.syncHeight),document.body.classList.add("is-locked"),setTimeout(()=>{document.getElementById("kiwify-upsell-modal")&&document.getElementById("kiwify-upsell-modal").addEventListener("pointermove",this.preventDefault)},1e3))}render(a,u){return N(fe,{children:N("div",{className:`kw-fixed kw-z-[1000000] kw-inset-0 ${a.type==="pix"?"md:kw-mt-0":""}`,id:"kiwify-upsell-modal",children:N("div",{className:`kw-flex kw-items-center kw-justify-center kw-min-h-screen kw-text-center sm:kw-block sm:kw-p-0 ${a.type==="pix"?"":"kw-pt-4 kw-px-4 kw-pb-20"}`,children:[N("div",{className:"kw-fixed kw-inset-0 kw-transition-opacity",children:N("div",{className:"kw-absolute kw-inset-0 kw-bg-gray-500 kw-opacity-75"},void 0,!1,{fileName:$,lineNumber:36,columnNumber:15},this)},void 0,!1,{fileName:$,lineNumber:33,columnNumber:13},this),N("span",{className:"kw-hidden sm:kw-inline-block sm:kw-align-middle sm:kw-h-screen","aria-hidden":"true",children:"\u200B"},void 0,!1,{fileName:$,lineNumber:40,columnNumber:13},this),N("div",{className:`kw-inline-block kw-bg-white kw-overflow-hidden kw-relative kw-rounded-lg kw-text-left kw-shadow-xl kw-transform kw-transition-all kw-align-middle kw-w-full ${a.type==="pix"?"sm:kw-max-w-[600px] kw-p-6 md:kw-mt-0 kw-form-container-kiwi-pix kw-overflow-y-auto":(a.setupFeeEnabled,"kw-max-w-[400px]")}`,id:"kiwify-upsell-modal-content",children:[N("div",{className:`bg-white ${a.type==="pix"?"":"kw-p-6"}`,children:N("div",{children:this.renderForm()},void 0,!1,{fileName:$,lineNumber:53,columnNumber:17},this)},void 0,!1,{fileName:$,lineNumber:52,columnNumber:15},this),a.type==="credit-card"?N("div",{style:"background-color: rgba(249,250,251,1)",className:"kw-py-3 kw-px-6 kw-flex kw-justify-center kw-flex-row-reverse",children:[N("button",{onClick:this.onCharge,disabled:u.isLoadingCharge,id:"kiwify-upsell-modal-charge",type:"button",className:`kw-inline-flex kw-font-sans kw-items-center kw-justify-center kw-rounded-md kw-border kw-border-transparent kw-shadow-sm kw-px-4 kw-py-2 kw-bg-indigo-600 kw-font-medium kw-text-white hover:kw-bg-indigo-700 kw-cursor-pointer focus:kw-outline-none kw-ml-3 kw-text-sm ${u.isLoadingCharge?"kw-opacity-50":""}`,style:`border-color: #d2d6dc; border-style:solid;background-color:${a.data.checkout_color?a.data.checkout_color:"rgba(88,80,236,1)"};color:${hs(a.data.checkout_color?a.data.checkout_color:"#000",!0)};`,children:[u.isLoadingCharge?N("svg",{id:"kiwify-upsell-modal-charge-loading",className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-5  kw-text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:$,lineNumber:66,columnNumber:23},this),N("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:$,lineNumber:67,columnNumber:23},this)]},void 0,!0,{fileName:$,lineNumber:65,columnNumber:47},this):"","Confirmar"]},void 0,!0,{fileName:$,lineNumber:64,columnNumber:19},this),N("button",{onClick:a.onCancel,disabled:a.isLoadingCancel,className:`kw-inline-flex kw-font-sans kw-items-center kw-cursor-pointer kw-justify-center kw-rounded-md kw-border kw-border-gray-100 kw-shadow kw-px-4 kw-py-2 kw-bg-white  kw-font-medium kw-text-gray-700 focus:kw-outline-none kw-mt-0 kw-ml-3 kw-w-auto kw-text-sm ${a.isLoadingCancel?"kw-opacity-50":""}`,id:"kiwify-upsell-modal-cancel",type:"button",style:"border-color: #d2d6dc; border-style:solid;",children:[a.isLoadingCancel?N("svg",{id:"kiwify-upsell-modal-cancel-loading",className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-5  kw-text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:$,lineNumber:73,columnNumber:25},this),N("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:$,lineNumber:74,columnNumber:25},this)]},void 0,!0,{fileName:$,lineNumber:72,columnNumber:47},this):"","Cancelar"]},void 0,!0,{fileName:$,lineNumber:71,columnNumber:19},this)]},void 0,!0,{fileName:$,lineNumber:63,columnNumber:17},this):""]},void 0,!0,{fileName:$,lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:$,lineNumber:31,columnNumber:11},this)},void 0,!1,{fileName:$,lineNumber:27,columnNumber:9},this)},void 0,!1)}preventDefault(a){a.preventDefault()}syncHeight(){document.body.style.setProperty("--window-inner-height",`${window.innerHeight}px`),document.body.style.setProperty("--window-vh",`${window.innerHeight*.01}px`),console.log(window.innerHeight)}}var De={},ks=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Un={},Q={};let Lt;const Ns=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Q.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17};Q.getSymbolTotalCodewords=function(o){return Ns[o]};Q.getBCHDigit=function(i){let o=0;for(;i!==0;)o++,i>>>=1;return o};Q.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');Lt=o};Q.isKanjiModeEnabled=function(){return typeof Lt!="undefined"};Q.toSJIS=function(o){return Lt(o)};var tt={};(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function o(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+a)}}i.isValid=function(u){return u&&typeof u.bit!="undefined"&&u.bit>=0&&u.bit<4},i.from=function(u,l){if(i.isValid(u))return u;try{return o(u)}catch{return l}}})(tt);function Fn(){this.buffer=[],this.length=0}Fn.prototype={get:function(i){const o=Math.floor(i/8);return(this.buffer[o]>>>7-i%8&1)===1},put:function(i,o){for(let a=0;a<o;a++)this.putBit((i>>>o-a-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),i&&(this.buffer[o]|=128>>>this.length%8),this.length++}};var Cs=Fn;function je(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}je.prototype.set=function(i,o,a,u){const l=i*this.size+o;this.data[l]=a,u&&(this.reservedBit[l]=!0)};je.prototype.get=function(i,o){return this.data[i*this.size+o]};je.prototype.xor=function(i,o,a){this.data[i*this.size+o]^=a};je.prototype.isReserved=function(i,o){return this.reservedBit[i*this.size+o]};var Ss=je,Hn={};(function(i){const o=Q.getSymbolSize;i.getRowColCoords=function(u){if(u===1)return[];const l=Math.floor(u/7)+2,s=o(u),h=s===145?26:Math.ceil((s-13)/(2*l-2))*2,g=[s-7];for(let d=1;d<l-1;d++)g[d]=g[d-1]-h;return g.push(6),g.reverse()},i.getPositions=function(u){const l=[],s=i.getRowColCoords(u),h=s.length;for(let g=0;g<h;g++)for(let d=0;d<h;d++)g===0&&d===0||g===0&&d===h-1||g===h-1&&d===0||l.push([s[g],s[d]]);return l}})(Hn);var zn={};const xs=Q.getSymbolSize,Nn=7;zn.getPositions=function(o){const a=xs(o);return[[0,0],[a-Nn,0],[0,a-Nn]]};var qn={};(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};i.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},i.from=function(l){return i.isValid(l)?parseInt(l,10):void 0},i.getPenaltyN1=function(l){const s=l.size;let h=0,g=0,d=0,S=null,m=null;for(let P=0;P<s;P++){g=d=0,S=m=null;for(let p=0;p<s;p++){let y=l.get(P,p);y===S?g++:(g>=5&&(h+=o.N1+(g-5)),S=y,g=1),y=l.get(p,P),y===m?d++:(d>=5&&(h+=o.N1+(d-5)),m=y,d=1)}g>=5&&(h+=o.N1+(g-5)),d>=5&&(h+=o.N1+(d-5))}return h},i.getPenaltyN2=function(l){const s=l.size;let h=0;for(let g=0;g<s-1;g++)for(let d=0;d<s-1;d++){const S=l.get(g,d)+l.get(g,d+1)+l.get(g+1,d)+l.get(g+1,d+1);(S===4||S===0)&&h++}return h*o.N2},i.getPenaltyN3=function(l){const s=l.size;let h=0,g=0,d=0;for(let S=0;S<s;S++){g=d=0;for(let m=0;m<s;m++)g=g<<1&2047|l.get(S,m),m>=10&&(g===1488||g===93)&&h++,d=d<<1&2047|l.get(m,S),m>=10&&(d===1488||d===93)&&h++}return h*o.N3},i.getPenaltyN4=function(l){let s=0;const h=l.data.length;for(let d=0;d<h;d++)s+=l.data[d];return Math.abs(Math.ceil(s*100/h/5)-10)*o.N4};function a(u,l,s){switch(u){case i.Patterns.PATTERN000:return(l+s)%2===0;case i.Patterns.PATTERN001:return l%2===0;case i.Patterns.PATTERN010:return s%3===0;case i.Patterns.PATTERN011:return(l+s)%3===0;case i.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(s/3))%2===0;case i.Patterns.PATTERN101:return l*s%2+l*s%3===0;case i.Patterns.PATTERN110:return(l*s%2+l*s%3)%2===0;case i.Patterns.PATTERN111:return(l*s%3+(l+s)%2)%2===0;default:throw new Error("bad maskPattern:"+u)}}i.applyMask=function(l,s){const h=s.size;for(let g=0;g<h;g++)for(let d=0;d<h;d++)s.isReserved(d,g)||s.xor(d,g,a(l,d,g))},i.getBestMask=function(l,s){const h=Object.keys(i.Patterns).length;let g=0,d=1/0;for(let S=0;S<h;S++){s(S),i.applyMask(S,l);const m=i.getPenaltyN1(l)+i.getPenaltyN2(l)+i.getPenaltyN3(l)+i.getPenaltyN4(l);i.applyMask(S,l),m<d&&(d=m,g=S)}return g}})(qn);var nt={};const le=tt,Je=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],We=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];nt.getBlocksCount=function(o,a){switch(a){case le.L:return Je[(o-1)*4+0];case le.M:return Je[(o-1)*4+1];case le.Q:return Je[(o-1)*4+2];case le.H:return Je[(o-1)*4+3];default:return}};nt.getTotalCodewordsCount=function(o,a){switch(a){case le.L:return We[(o-1)*4+0];case le.M:return We[(o-1)*4+1];case le.Q:return We[(o-1)*4+2];case le.H:return We[(o-1)*4+3];default:return}};var $n={},rt={};const Me=new Uint8Array(512),Ge=new Uint8Array(256);(function(){let o=1;for(let a=0;a<255;a++)Me[a]=o,Ge[o]=a,o<<=1,o&256&&(o^=285);for(let a=255;a<512;a++)Me[a]=Me[a-255]})();rt.log=function(o){if(o<1)throw new Error("log("+o+")");return Ge[o]};rt.exp=function(o){return Me[o]};rt.mul=function(o,a){return o===0||a===0?0:Me[Ge[o]+Ge[a]]};(function(i){const o=rt;i.mul=function(u,l){const s=new Uint8Array(u.length+l.length-1);for(let h=0;h<u.length;h++)for(let g=0;g<l.length;g++)s[h+g]^=o.mul(u[h],l[g]);return s},i.mod=function(u,l){let s=new Uint8Array(u);for(;s.length-l.length>=0;){const h=s[0];for(let d=0;d<l.length;d++)s[d]^=o.mul(l[d],h);let g=0;for(;g<s.length&&s[g]===0;)g++;s=s.slice(g)}return s},i.generateECPolynomial=function(u){let l=new Uint8Array([1]);for(let s=0;s<u;s++)l=i.mul(l,new Uint8Array([1,o.exp(s)]));return l}})($n);const Vn=$n;function Rt(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Rt.prototype.initialize=function(o){this.degree=o,this.genPoly=Vn.generateECPolynomial(this.degree)};Rt.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(o.length+this.degree);a.set(o);const u=Vn.mod(a,this.genPoly),l=this.degree-u.length;if(l>0){const s=new Uint8Array(this.degree);return s.set(u,l),s}return u};var Ts=Rt,Jn={},he={},Ot={};Ot.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40};var re={};const Wn="[0-9]+",Es="[A-Z $%*+\\-./:]+";let Be="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Be=Be.replace(/u/g,"\\u");const Ps="(?:(?![A-Z0-9 $%*+\\-./:]|"+Be+`)(?:.|[\r
]))+`;re.KANJI=new RegExp(Be,"g");re.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");re.BYTE=new RegExp(Ps,"g");re.NUMERIC=new RegExp(Wn,"g");re.ALPHANUMERIC=new RegExp(Es,"g");const As=new RegExp("^"+Be+"$"),Ls=new RegExp("^"+Wn+"$"),Rs=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");re.testKanji=function(o){return As.test(o)};re.testNumeric=function(o){return Ls.test(o)};re.testAlphanumeric=function(o){return Rs.test(o)};(function(i){const o=Ot,a=re;i.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(s,h){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!o.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?s.ccBits[0]:h<27?s.ccBits[1]:s.ccBits[2]},i.getBestModeForData=function(s){return a.testNumeric(s)?i.NUMERIC:a.testAlphanumeric(s)?i.ALPHANUMERIC:a.testKanji(s)?i.KANJI:i.BYTE},i.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},i.isValid=function(s){return s&&s.bit&&s.ccBits};function u(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+l)}}i.from=function(s,h){if(i.isValid(s))return s;try{return u(s)}catch{return h}}})(he);(function(i){const o=Q,a=nt,u=tt,l=he,s=Ot,h=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,g=o.getBCHDigit(h);function d(p,y,b){for(let k=1;k<=40;k++)if(y<=i.getCapacity(k,b,p))return k}function S(p,y){return l.getCharCountIndicator(p,y)+4}function m(p,y){let b=0;return p.forEach(function(k){b+=S(k.mode,y)+k.getBitsLength()}),b}function P(p,y){for(let b=1;b<=40;b++)if(m(p,b)<=i.getCapacity(b,y,l.MIXED))return b}i.from=function(y,b){return s.isValid(y)?parseInt(y,10):b},i.getCapacity=function(y,b,k){if(!s.isValid(y))throw new Error("Invalid QR Code version");typeof k=="undefined"&&(k=l.BYTE);const _=o.getSymbolTotalCodewords(y),v=a.getTotalCodewordsCount(y,b),C=(_-v)*8;if(k===l.MIXED)return C;const T=C-S(k,y);switch(k){case l.NUMERIC:return Math.floor(T/10*3);case l.ALPHANUMERIC:return Math.floor(T/11*2);case l.KANJI:return Math.floor(T/13);case l.BYTE:default:return Math.floor(T/8)}},i.getBestVersionForData=function(y,b){let k;const _=u.from(b,u.M);if(Array.isArray(y)){if(y.length>1)return P(y,_);if(y.length===0)return 1;k=y[0]}else k=y;return d(k.mode,k.getLength(),_)},i.getEncodedBits=function(y){if(!s.isValid(y)||y<7)throw new Error("Invalid QR Code version");let b=y<<12;for(;o.getBCHDigit(b)-g>=0;)b^=h<<o.getBCHDigit(b)-g;return y<<12|b}})(Jn);var Xn={};const St=Q,Kn=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Os=1<<14|1<<12|1<<10|1<<4|1<<1,Cn=St.getBCHDigit(Kn);Xn.getEncodedBits=function(o,a){const u=o.bit<<3|a;let l=u<<10;for(;St.getBCHDigit(l)-Cn>=0;)l^=Kn<<St.getBCHDigit(l)-Cn;return(u<<10|l)^Os};var Qn={};const Is=he;function Ne(i){this.mode=Is.NUMERIC,this.data=i.toString()}Ne.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)};Ne.prototype.getLength=function(){return this.data.length};Ne.prototype.getBitsLength=function(){return Ne.getBitsLength(this.data.length)};Ne.prototype.write=function(o){let a,u,l;for(a=0;a+3<=this.data.length;a+=3)u=this.data.substr(a,3),l=parseInt(u,10),o.put(l,10);const s=this.data.length-a;s>0&&(u=this.data.substr(a),l=parseInt(u,10),o.put(l,s*3+1))};var Ms=Ne;const Bs=he,wt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ce(i){this.mode=Bs.ALPHANUMERIC,this.data=i}Ce.getBitsLength=function(o){return 11*Math.floor(o/2)+6*(o%2)};Ce.prototype.getLength=function(){return this.data.length};Ce.prototype.getBitsLength=function(){return Ce.getBitsLength(this.data.length)};Ce.prototype.write=function(o){let a;for(a=0;a+2<=this.data.length;a+=2){let u=wt.indexOf(this.data[a])*45;u+=wt.indexOf(this.data[a+1]),o.put(u,11)}this.data.length%2&&o.put(wt.indexOf(this.data[a]),6)};var Ds=Ce,js=function(o){for(var a=[],u=o.length,l=0;l<u;l++){var s=o.charCodeAt(l);if(s>=55296&&s<=56319&&u>l+1){var h=o.charCodeAt(l+1);h>=56320&&h<=57343&&(s=(s-55296)*1024+h-56320+65536,l+=1)}if(s<128){a.push(s);continue}if(s<2048){a.push(s>>6|192),a.push(s&63|128);continue}if(s<55296||s>=57344&&s<65536){a.push(s>>12|224),a.push(s>>6&63|128),a.push(s&63|128);continue}if(s>=65536&&s<=1114111){a.push(s>>18|240),a.push(s>>12&63|128),a.push(s>>6&63|128),a.push(s&63|128);continue}a.push(239,191,189)}return new Uint8Array(a).buffer};const Us=js,Fs=he;function Se(i){this.mode=Fs.BYTE,this.data=new Uint8Array(Us(i))}Se.getBitsLength=function(o){return o*8};Se.prototype.getLength=function(){return this.data.length};Se.prototype.getBitsLength=function(){return Se.getBitsLength(this.data.length)};Se.prototype.write=function(i){for(let o=0,a=this.data.length;o<a;o++)i.put(this.data[o],8)};var Hs=Se;const zs=he,qs=Q;function xe(i){this.mode=zs.KANJI,this.data=i}xe.getBitsLength=function(o){return o*13};xe.prototype.getLength=function(){return this.data.length};xe.prototype.getBitsLength=function(){return xe.getBitsLength(this.data.length)};xe.prototype.write=function(i){let o;for(o=0;o<this.data.length;o++){let a=qs.toSJIS(this.data[o]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[o]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),i.put(a,13)}};var $s=xe,Yn={exports:{}};(function(i){var o={single_source_shortest_paths:function(a,u,l){var s={},h={};h[u]=0;var g=o.PriorityQueue.make();g.push(u,0);for(var d,S,m,P,p,y,b,k,_;!g.empty();){d=g.pop(),S=d.value,P=d.cost,p=a[S]||{};for(m in p)p.hasOwnProperty(m)&&(y=p[m],b=P+y,k=h[m],_=typeof h[m]=="undefined",(_||k>b)&&(h[m]=b,g.push(m,b),s[m]=S))}if(typeof l!="undefined"&&typeof h[l]=="undefined"){var v=["Could not find a path from ",u," to ",l,"."].join("");throw new Error(v)}return s},extract_shortest_path_from_predecessor_list:function(a,u){for(var l=[],s=u;s;)l.push(s),s=a[s];return l.reverse(),l},find_path:function(a,u,l){var s=o.single_source_shortest_paths(a,u,l);return o.extract_shortest_path_from_predecessor_list(s,l)},PriorityQueue:{make:function(a){var u=o.PriorityQueue,l={},s;a=a||{};for(s in u)u.hasOwnProperty(s)&&(l[s]=u[s]);return l.queue=[],l.sorter=a.sorter||u.default_sorter,l},default_sorter:function(a,u){return a.cost-u.cost},push:function(a,u){var l={value:a,cost:u};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=o})(Yn);(function(i){const o=he,a=Ms,u=Ds,l=Hs,s=$s,h=re,g=Q,d=Yn.exports;function S(v){return unescape(encodeURIComponent(v)).length}function m(v,C,T){const E=[];let O;for(;(O=v.exec(T))!==null;)E.push({data:O[0],index:O.index,mode:C,length:O[0].length});return E}function P(v){const C=m(h.NUMERIC,o.NUMERIC,v),T=m(h.ALPHANUMERIC,o.ALPHANUMERIC,v);let E,O;return g.isKanjiModeEnabled()?(E=m(h.BYTE,o.BYTE,v),O=m(h.KANJI,o.KANJI,v)):(E=m(h.BYTE_KANJI,o.BYTE,v),O=[]),C.concat(T,E,O).sort(function(j,F){return j.index-F.index}).map(function(j){return{data:j.data,mode:j.mode,length:j.length}})}function p(v,C){switch(C){case o.NUMERIC:return a.getBitsLength(v);case o.ALPHANUMERIC:return u.getBitsLength(v);case o.KANJI:return s.getBitsLength(v);case o.BYTE:return l.getBitsLength(v)}}function y(v){return v.reduce(function(C,T){const E=C.length-1>=0?C[C.length-1]:null;return E&&E.mode===T.mode?(C[C.length-1].data+=T.data,C):(C.push(T),C)},[])}function b(v){const C=[];for(let T=0;T<v.length;T++){const E=v[T];switch(E.mode){case o.NUMERIC:C.push([E,{data:E.data,mode:o.ALPHANUMERIC,length:E.length},{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.ALPHANUMERIC:C.push([E,{data:E.data,mode:o.BYTE,length:E.length}]);break;case o.KANJI:C.push([E,{data:E.data,mode:o.BYTE,length:S(E.data)}]);break;case o.BYTE:C.push([{data:E.data,mode:o.BYTE,length:S(E.data)}])}}return C}function k(v,C){const T={},E={start:{}};let O=["start"];for(let B=0;B<v.length;B++){const j=v[B],F=[];for(let U=0;U<j.length;U++){const H=j[U],de=""+B+U;F.push(de),T[de]={node:H,lastCount:0},E[de]={};for(let Te=0;Te<O.length;Te++){const Z=O[Te];T[Z]&&T[Z].node.mode===H.mode?(E[Z][de]=p(T[Z].lastCount+H.length,H.mode)-p(T[Z].lastCount,H.mode),T[Z].lastCount+=H.length):(T[Z]&&(T[Z].lastCount=H.length),E[Z][de]=p(H.length,H.mode)+4+o.getCharCountIndicator(H.mode,C))}}O=F}for(let B=0;B<O.length;B++)E[O[B]].end=0;return{map:E,table:T}}function _(v,C){let T;const E=o.getBestModeForData(v);if(T=o.from(C,E),T!==o.BYTE&&T.bit<E.bit)throw new Error('"'+v+'" cannot be encoded with mode '+o.toString(T)+`.
 Suggested mode is: `+o.toString(E));switch(T===o.KANJI&&!g.isKanjiModeEnabled()&&(T=o.BYTE),T){case o.NUMERIC:return new a(v);case o.ALPHANUMERIC:return new u(v);case o.KANJI:return new s(v);case o.BYTE:return new l(v)}}i.fromArray=function(C){return C.reduce(function(T,E){return typeof E=="string"?T.push(_(E,null)):E.data&&T.push(_(E.data,E.mode)),T},[])},i.fromString=function(C,T){const E=P(C,g.isKanjiModeEnabled()),O=b(E),B=k(O,T),j=d.find_path(B.map,"start","end"),F=[];for(let U=1;U<j.length-1;U++)F.push(B.table[j[U]].node);return i.fromArray(y(F))},i.rawSplit=function(C){return i.fromArray(P(C,g.isKanjiModeEnabled()))}})(Qn);const it=Q,bt=tt,Vs=Cs,Js=Ss,Ws=Hn,Xs=zn,xt=qn,Tt=nt,Ks=Ts,Ze=Jn,Qs=Xn,Ys=he,kt=Qn;function Gs(i,o){const a=i.size,u=Xs.getPositions(o);for(let l=0;l<u.length;l++){const s=u[l][0],h=u[l][1];for(let g=-1;g<=7;g++)if(!(s+g<=-1||a<=s+g))for(let d=-1;d<=7;d++)h+d<=-1||a<=h+d||(g>=0&&g<=6&&(d===0||d===6)||d>=0&&d<=6&&(g===0||g===6)||g>=2&&g<=4&&d>=2&&d<=4?i.set(s+g,h+d,!0,!0):i.set(s+g,h+d,!1,!0))}}function Zs(i){const o=i.size;for(let a=8;a<o-8;a++){const u=a%2===0;i.set(a,6,u,!0),i.set(6,a,u,!0)}}function ea(i,o){const a=Ws.getPositions(o);for(let u=0;u<a.length;u++){const l=a[u][0],s=a[u][1];for(let h=-2;h<=2;h++)for(let g=-2;g<=2;g++)h===-2||h===2||g===-2||g===2||h===0&&g===0?i.set(l+h,s+g,!0,!0):i.set(l+h,s+g,!1,!0)}}function ta(i,o){const a=i.size,u=Ze.getEncodedBits(o);let l,s,h;for(let g=0;g<18;g++)l=Math.floor(g/3),s=g%3+a-8-3,h=(u>>g&1)===1,i.set(l,s,h,!0),i.set(s,l,h,!0)}function Nt(i,o,a){const u=i.size,l=Qs.getEncodedBits(o,a);let s,h;for(s=0;s<15;s++)h=(l>>s&1)===1,s<6?i.set(s,8,h,!0):s<8?i.set(s+1,8,h,!0):i.set(u-15+s,8,h,!0),s<8?i.set(8,u-s-1,h,!0):s<9?i.set(8,15-s-1+1,h,!0):i.set(8,15-s-1,h,!0);i.set(u-8,8,1,!0)}function na(i,o){const a=i.size;let u=-1,l=a-1,s=7,h=0;for(let g=a-1;g>0;g-=2)for(g===6&&g--;;){for(let d=0;d<2;d++)if(!i.isReserved(l,g-d)){let S=!1;h<o.length&&(S=(o[h]>>>s&1)===1),i.set(l,g-d,S),s--,s===-1&&(h++,s=7)}if(l+=u,l<0||a<=l){l-=u,u=-u;break}}}function ra(i,o,a){const u=new Vs;a.forEach(function(d){u.put(d.mode.bit,4),u.put(d.getLength(),Ys.getCharCountIndicator(d.mode,i)),d.write(u)});const l=it.getSymbolTotalCodewords(i),s=Tt.getTotalCodewordsCount(i,o),h=(l-s)*8;for(u.getLengthInBits()+4<=h&&u.put(0,4);u.getLengthInBits()%8!==0;)u.putBit(0);const g=(h-u.getLengthInBits())/8;for(let d=0;d<g;d++)u.put(d%2?17:236,8);return ia(u,i,o)}function ia(i,o,a){const u=it.getSymbolTotalCodewords(o),l=Tt.getTotalCodewordsCount(o,a),s=u-l,h=Tt.getBlocksCount(o,a),g=u%h,d=h-g,S=Math.floor(u/h),m=Math.floor(s/h),P=m+1,p=S-m,y=new Ks(p);let b=0;const k=new Array(h),_=new Array(h);let v=0;const C=new Uint8Array(i.buffer);for(let j=0;j<h;j++){const F=j<d?m:P;k[j]=C.slice(b,b+F),_[j]=y.encode(k[j]),b+=F,v=Math.max(v,F)}const T=new Uint8Array(u);let E=0,O,B;for(O=0;O<v;O++)for(B=0;B<h;B++)O<k[B].length&&(T[E++]=k[B][O]);for(O=0;O<p;O++)for(B=0;B<h;B++)T[E++]=_[B][O];return T}function oa(i,o,a,u){let l;if(Array.isArray(i))l=kt.fromArray(i);else if(typeof i=="string"){let S=o;if(!S){const m=kt.rawSplit(i);S=Ze.getBestVersionForData(m,a)}l=kt.fromString(i,S||40)}else throw new Error("Invalid data");const s=Ze.getBestVersionForData(l,a);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!o)o=s;else if(o<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const h=ra(o,a,l),g=it.getSymbolSize(o),d=new Js(g);return Gs(d,o),Zs(d),ea(d,o),Nt(d,a,0),o>=7&&ta(d,o),na(d,h),isNaN(u)&&(u=xt.getBestMask(d,Nt.bind(null,d,a))),xt.applyMask(u,d),Nt(d,a,u),{modules:d,version:o,errorCorrectionLevel:a,maskPattern:u,segments:l}}Un.create=function(o,a){if(typeof o=="undefined"||o==="")throw new Error("No input text");let u=bt.M,l,s;return typeof a!="undefined"&&(u=bt.from(a.errorCorrectionLevel,bt.M),l=Ze.from(a.version),s=xt.from(a.maskPattern),a.toSJISFunc&&it.setToSJISFunction(a.toSJISFunc)),oa(o,l,u,s)};var Gn={},It={};(function(i){function o(a){if(typeof a=="number"&&(a=a.toString()),typeof a!="string")throw new Error("Color should be defined as hex string");let u=a.slice().replace("#","").split("");if(u.length<3||u.length===5||u.length>8)throw new Error("Invalid hex color: "+a);(u.length===3||u.length===4)&&(u=Array.prototype.concat.apply([],u.map(function(s){return[s,s]}))),u.length===6&&u.push("F","F");const l=parseInt(u.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+u.slice(0,6).join("")}}i.getOptions=function(u){u||(u={}),u.color||(u.color={});const l=typeof u.margin=="undefined"||u.margin===null||u.margin<0?4:u.margin,s=u.width&&u.width>=21?u.width:void 0,h=u.scale||4;return{width:s,scale:s?4:h,margin:l,color:{dark:o(u.color.dark||"#000000ff"),light:o(u.color.light||"#ffffffff")},type:u.type,rendererOpts:u.rendererOpts||{}}},i.getScale=function(u,l){return l.width&&l.width>=u+l.margin*2?l.width/(u+l.margin*2):l.scale},i.getImageWidth=function(u,l){const s=i.getScale(u,l);return Math.floor((u+l.margin*2)*s)},i.qrToImageData=function(u,l,s){const h=l.modules.size,g=l.modules.data,d=i.getScale(h,s),S=Math.floor((h+s.margin*2)*d),m=s.margin*d,P=[s.color.light,s.color.dark];for(let p=0;p<S;p++)for(let y=0;y<S;y++){let b=(p*S+y)*4,k=s.color.light;if(p>=m&&y>=m&&p<S-m&&y<S-m){const _=Math.floor((p-m)/d),v=Math.floor((y-m)/d);k=P[g[_*h+v]?1:0]}u[b++]=k.r,u[b++]=k.g,u[b++]=k.b,u[b]=k.a}}})(It);(function(i){const o=It;function a(l,s,h){l.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=h,s.width=h,s.style.height=h+"px",s.style.width=h+"px"}function u(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(s,h,g){let d=g,S=h;typeof d=="undefined"&&(!h||!h.getContext)&&(d=h,h=void 0),h||(S=u()),d=o.getOptions(d);const m=o.getImageWidth(s.modules.size,d),P=S.getContext("2d"),p=P.createImageData(m,m);return o.qrToImageData(p.data,s,d),a(P,S,m),P.putImageData(p,0,0),S},i.renderToDataURL=function(s,h,g){let d=g;typeof d=="undefined"&&(!h||!h.getContext)&&(d=h,h=void 0),d||(d={});const S=i.render(s,h,d),m=d.type||"image/png",P=d.rendererOpts||{};return S.toDataURL(m,P.quality)}})(Gn);var Zn={};const sa=It;function Sn(i,o){const a=i.a/255,u=o+'="'+i.hex+'"';return a<1?u+" "+o+'-opacity="'+a.toFixed(2).slice(1)+'"':u}function Ct(i,o,a){let u=i+o;return typeof a!="undefined"&&(u+=" "+a),u}function aa(i,o,a){let u="",l=0,s=!1,h=0;for(let g=0;g<i.length;g++){const d=Math.floor(g%o),S=Math.floor(g/o);!d&&!s&&(s=!0),i[g]?(h++,g>0&&d>0&&i[g-1]||(u+=s?Ct("M",d+a,.5+S+a):Ct("m",l,0),l=0,s=!1),d+1<o&&i[g+1]||(u+=Ct("h",h),h=0)):l++}return u}Zn.render=function(o,a,u){const l=sa.getOptions(a),s=o.modules.size,h=o.modules.data,g=s+l.margin*2,d=l.color.light.a?"<path "+Sn(l.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",S="<path "+Sn(l.color.dark,"stroke")+' d="'+aa(h,s,l.margin)+'"/>',m='viewBox="0 0 '+g+" "+g+'"',P=l.width?'width="'+l.width+'" height="'+l.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+P+m+' shape-rendering="crispEdges">'+d+S+`</svg>
`;return typeof u=="function"&&u(null,p),p};const ca=ks,Et=Un,er=Gn,ua=Zn;function Mt(i,o,a,u,l){const s=[].slice.call(arguments,1),h=s.length,g=typeof s[h-1]=="function";if(!g&&!ca())throw new Error("Callback required as last argument");if(g){if(h<2)throw new Error("Too few arguments provided");h===2?(l=a,a=o,o=u=void 0):h===3&&(o.getContext&&typeof l=="undefined"?(l=u,u=void 0):(l=u,u=a,a=o,o=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(a=o,o=u=void 0):h===2&&!o.getContext&&(u=a,a=o,o=void 0),new Promise(function(d,S){try{const m=Et.create(a,u);d(i(m,o,u))}catch(m){S(m)}})}try{const d=Et.create(a,u);l(null,i(d,o,u))}catch(d){l(d)}}De.create=Et.create;De.toCanvas=Mt.bind(null,er.render);De.toDataURL=Mt.bind(null,er.renderToDataURL);De.toString=Mt.bind(null,function(i,o,a){return ua.render(i,a)});var G="/Users/justaashir/Documents/Kiwify/upsell-vite/src/app.jsx";class la extends K{constructor(){super();q(this,"setupCancelButton",()=>{let a=this;const u=document.querySelectorAll("[id^=kiwify-upsell-cancel-trigger]");if(u.length)for(let l=0;l<u.length;l++)u[l].onclick=a.onCancel});q(this,"setupUpsellButton",()=>{let a=null,u=this;const l=document.querySelectorAll("[id^=kiwify-upsell-trigger]");if(l.length)for(let s=0;s<l.length;s++)a=l[s].id.replace("kiwify-upsell-trigger-",""),l[s].onclick=function(){u.fetchInitialData(a)};this.setState({linkId:a})});q(this,"onCancel",()=>{if(nextDownsellURL){let a=At(this.state.redirect,this.state.tokenParam,this.state.order_amount,this.state.modalContentType==="pix",this.state.payment_version);ne(nextDownsellURL,a)}else this.state.redirect!=="undefined"&&this.state.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.state.redirect}`):(this.setState({showModal:!0}),this.setState({modalContentType:"payment-only"}));this.setState({isLoadingCancel:!0})});q(this,"fetchInitialData",async()=>{try{let a=this;if(this.setState({data:{tokenParam:this.state.tokenParam,redirect:this.state.redirect,order_amount:this.state.order_amount,linkId:this.state.linkId}}),this.setState({isLoadingModal:!0}),this.state.modalContentType==="pix")setTimeout(async()=>{const l=await(await fetch(`https://checkout-api.kiwify.com.br/link/${a.state.linkId}?upsell=yes`)).json();l.subscription&&l.subscription.setup_fee_enabled&&this.setState({setupFeeEnabled:!0}),a.setupPix()},1e3);else{const l=await(await fetch(`https://checkout-api.kiwify.com.br/link/${this.state.linkId}?upsell=yes`)).json();this.setState({data:Ve(Ve({},l),this.state.data)}),l.subscription&&l.subscription.setup_fee_enabled&&this.setState({setupFeeEnabled:!0}),this.setState({isLoadingModal:!1}),this.setState({showModal:!0})}}catch(a){console.log(a)}});q(this,"changeModalType",a=>{a==="payment-only"&&this.setState({modalContentType:"payment-only"})});q(this,"setupPix",async()=>{try{let a="/generate-pix/upsell",u={token:this.state.data.tokenParam,link:this.state.data.linkId};(this.state.payment_version&&this.state.payment_version=="kiwipay"||this.state.setupFeeEnabled)&&(a="/v2/charge/upsell",u.paymentMethod="pix");const s=await(await fetch(`https://checkout-api.kiwify.com.br${a}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(u)})).json();if(s.error!=="USED_TOKEN"){const h=await De.toDataURL(s.pix_qrcode);this.setState({pixResponse:pn(Ve({},s),{qr:h})}),this.setState({isLoadingModal:!1}),this.setState({showModal:!0})}else this.state.data.redirect!=="undefined"&&this.state.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.state.data.redirect}`):(this.changeModalType("payment-only"),this.setState({showModal:!0}))}catch{this.state.data.redirect!=="undefined"&&this.state.data.redirect?ne(`https://dashboard.kiwify.com.br/student/password/${this.state.data.redirect}`):(this.changeModalType("payment-only"),this.setState({showModal:!0}))}});this.state={data:null,isLoadingCancel:!1,isLoadingModal:!1,modalContentType:be("pix_upsell")?"pix":"credit-card",showModal:!1,tokenParam:be("token"),redirect:be("code_senha"),order_amount:be("amount"),payment_version:be("payment_version")?be("payment_version"):"pagarme",pixResponse:{},linkId:null,setupFeeEnabled:!1}}componentWillMount(){this.setupCancelButton(),this.setupUpsellButton()}render(a,u){return N("div",{children:[u.isLoadingModal?N("div",{children:N("div",{className:"kw-fixed kw-z-[1000000] kw-inset-0 kw-overflow-y-auto",id:"kiwify-upsell-loading",children:N("div",{className:"kw-flex kw-items-end kw-justify-center kw-min-h-screen kw-pt-4 kw-px-4 kw-pb-20 kw-text-center kw-sm:block kw-sm:p-0",children:N("div",{className:"kw-fixed kw-inset-0 kw-transition-opacity","aria-hidden":"true",children:N("div",{className:"kw-absolute kw-inset-0 kw-bg-gray-500 kw-w-full kw-opacity-75",children:N("div",{className:"kw-min-h-screen kw-flex kw-justify-center kw-flex-col kw-mx-auto kw-p-10",children:N("svg",{className:"kw-animate-spin -kw-ml-1 kw-mr-3 kw-h-20  kw-text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[N("circle",{className:"kw-opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},void 0,!1,{fileName:G,lineNumber:38,columnNumber:23},this),N("path",{className:"kw-opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},void 0,!1,{fileName:G,lineNumber:39,columnNumber:23},this)]},void 0,!0,{fileName:G,lineNumber:37,columnNumber:21},this)},void 0,!1,{fileName:G,lineNumber:36,columnNumber:19},this)},void 0,!1,{fileName:G,lineNumber:35,columnNumber:17},this)},void 0,!1,{fileName:G,lineNumber:34,columnNumber:15},this)},void 0,!1,{fileName:G,lineNumber:33,columnNumber:13},this)},void 0,!1,{fileName:G,lineNumber:32,columnNumber:11},this)},void 0,!1,{fileName:G,lineNumber:31,columnNumber:34},this):"",u.showModal?N("div",{children:N(bs,{setupFeeEnabled:u.setupFeeEnabled,paymentVersion:u.payment_version,changeModalType:this.changeModalType,data:u.data,pixResponse:u.pixResponse,linkId:u.linkId,token:u.tokenParam,type:u.modalContentType,isLoadingCancel:u.isLoadingCancel,onCancel:this.onCancel},void 0,!1,{fileName:G,lineNumber:48,columnNumber:11},this)},void 0,!1,{fileName:G,lineNumber:47,columnNumber:29},this):""]},void 0,!0,{fileName:G,lineNumber:30,columnNumber:7})}}var fa="/Users/justaashir/Documents/Kiwify/upsell-vite/src/main.jsx";if(!document.getElementById("kiwify-upsell-container")){const i=document.createElement("div");i.id="kiwify-upsell-container",i.className="kw-z-[1000000]",document.body.appendChild(i)}ss(N(la,{},void 0,!1,{fileName:fa,lineNumber:12,columnNumber:8}),document.getElementById("kiwify-upsell-container"));

